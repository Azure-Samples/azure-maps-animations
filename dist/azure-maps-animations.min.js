/* MIT License - Copyright (c) Microsoft Corporation. */


((D,x)=>{var j=function(t,e){return(j=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)};function t(t,e){function n(){this.constructor=t}j(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Z=function(){return(Z=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},G=(z.merge=function(t,e){for(var n=window||global,r=0,i=t.split(".");r<i.length;r++){var o=i[r];if(!n[o])return e;n=n[o]}return Z(Z({},n),e)},z);function z(){}e.linear=function(t){return t},e.easeInSine=function(t){return 1-Math.cos(t*Math.PI*.5)},e.easeOutSine=function(t){return Math.sin(t*Math.PI*.5)},e.easeInOutSine=function(t){return-.5*(Math.cos(Math.PI*t)-1)},e.easeInQuad=function(t){return t*t},e.easeOutQuad=function(t){return t*(2-t)},e.easeInOutQuad=function(t){return t<.5?2*t*t:(4-2*t)*t-1},e.easeInCubic=function(t){return t*t*t},e.easeOutCubic=function(t){t-=1;return t*t*t+1},e.easeInOutCubic=function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},e.easeInQuart=function(t){return t*t*t*t},e.easeOutQuart=function(t){t-=1;return 1-t*t*t*t},e.easeInOutQuart=function(t){return t<.5?8*t*t*t*t:1-8*(t=t-1)*t*t*t},e.easeInQuint=function(t){return t*t*t*t*t},e.easeOutQuint=function(t){t-=1;return 1+t*t*t*t*t},e.easeInOutQuint=function(t){return t<.5?16*t*t*t*t*t:1+16*(t=t-1)*t*t*t*t},e.easeInExpo=function(t){return 0===t?0:Math.pow(2,10*(t-1))},e.easeOutExpo=function(t){return 1===t?1:1-Math.pow(2,-10*t)},e.easeInOutExpo=function(t){return 0===t||1===t?t:(t=2*t-1)<0?.5*Math.pow(2,10*t):.5*(2-Math.pow(2,-10*t))},e.easeInCirc=function(t){return-1*(Math.sqrt(1-t*t)-1)},e.easeOutCirc=function(t){t-=1;return Math.sqrt(1-t*t)},e.easeInOutCirc=function(t){var t=2*t;return t<1?-.5*(Math.sqrt(1-t*t)-1):(t=t-2,.5*(Math.sqrt(1-t*t)+1))},e.easeInBack=function(t,e){return t*t*(((e=e||1.70158)+1)*t-e)},e.easeOutBack=function(t,e){t-=1;return t*t*(((e=e||1.70158)+1)*t+e)+1},e.easeInOutBack=function(t,e){var t=2*t,e=1.525*(e=e||1.70158);return t<1?.5*t*t*((1+e)*t-e):.5*((t=t-2)*t*((1+e)*t+e)+2)},e.easeInElastic=function(t,e){var n;return 0===t||1===t?t:(t=t-1,n=(e=1-(e=e||.7))/(2*Math.PI)*Math.asin(1),-(Math.pow(2,10*t)*Math.sin(2*Math.PI*(t-n)/e)))},e.easeOutElastic=function(t,e){var n;return 0===t||1===t?t:(t=2*t,n=(e=1-(e=e||.7))/(2*Math.PI)*Math.asin(1),Math.pow(2,-10*t)*Math.sin(2*Math.PI*(t-n)/e)+1)},e.easeInOutElastic=function(t,e){var n;return 0===t||1===t?t:(t=2*t-1,n=(e=1-(e=e||.65))/(2*Math.PI)*Math.asin(1),t<0?Math.pow(2,10*t)*Math.sin(2*Math.PI*(t-n)/e)*-.5:Math.pow(2,-10*t)*Math.sin(2*Math.PI*(t-n)/e)*.5+1)},e.easeOutBounce=function(t){var e;return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(e=t-1.5/2.75)*e+.75:t<2.5/2.75?7.5625*(e=t-2.25/2.75)*e+.9375:7.5625*(e=t-2.625/2.75)*e+.984375},e.easeInBounce=function(t){return 1-e.easeOutBounce(1-t)},e.easeInOutBounce=function(t){return t<.5?.5*e.easeInBounce(2*t):.5*e.easeOutBounce(2*t-1)+.5};var a=e;function e(){}p.getProgress=function(t,e,n,r){return Math.max(Math.min((t-e)*r/n,1),0)},p.getStartTime=function(t,e,n){return performance.now()-Math.round(e*t/n)},p.getDimensions=function(t){if(t&&Array.isArray(t)&&0<t.length){if("number"==typeof t[0])return 0;if(Array.isArray(t[0])&&0<t[0].length){if("number"==typeof t[0][0])return 1;if(Array.isArray(t[0][0])&&0<t[0][0].length){if("number"==typeof t[0][0][0])return 2;if(Array.isArray(t[0][0][0])&&0<t[0][0][0].length&&"number"==typeof t[0][0][0][0])return 3}}}return-1},p.getSuitableCoordinates=function(t,e){var n="Point";if(t instanceof x.Shape&&(n=t.getType()),e){var r=p.getDimensions(e);switch(n){case"Point":switch(r){case 0:return e;case 1:return e[0];case 2:return e[0][0];case 3:return e[0][0][0]}break;case"MultiPoint":case"LineString":switch(r){case 0:return"MultiPoint"===n?[e]:[e,e];case 1:return e;case 2:return e[0];case 3:return e[0][0]}break;case"MultiLineString":case"Polygon":switch(r){case 0:return[[e,e,e]];case 1:return[e];case 2:return e;case 3:return e[0]}break;case"MultiPolygon":switch(r){case 0:return[[[e,e,e]]];case 1:return[[e]];case 2:return[e];case 3:return e}}}return null},p.getPixelHeading=function(t,e){var n=(e[0]-t[0])*Math.PI/180;return 180*(2.5*Math.PI-Math.atan2((t[1]-e[1])*Math.PI/180,n))/Math.PI%360},p.getPixelDestination=function(t,e,n){return[t[0]+n*Math.cos((e+270)*Math.PI/180),t[1]+n*Math.sin((e+270)*Math.PI/180)]},p.setMetadata=function(t,e){t&&e&&(t instanceof x.Shape?t.setProperties(Object.assign(t.getProperties(),e)):t instanceof x.HtmlMarker&&(t.metadata=Object.assign(t.metadata||{},e)))},p.setCoordinates=function(t,e,n){if(t)if(t instanceof x.Shape)switch(t.getType()){case"Point":t.setCoordinates(e);break;case"LineString":n&&t.setCoordinates(n)}else t instanceof x.HtmlMarker&&t.setOptions({position:e})},p.getPropertyPath=function(t){return t.split("/")},p.setValue=function(t,e,n){var r;1<e.length?(r=e.shift(),p.setValue(t[r]="[object Object]"===Object.prototype.toString.call(t[r])?t[r]:{},e,n)):t[e[0]]=n},p.getValue=function(t,e){var n=e.length;if(0<n&&t){var r=t[e[0]];if(null!=r){for(var i=void 0,i=1;i<n&&null!=(r=r[e[i]]);i++);if(i===n&&null!=r)return r}}return null},p.interpolateValue=function(t,e,n,r,i){if(t&&e&&r){r.interpolation=r.interpolation||"linear";var o=p.getPropertyPath(r.propertyPath),a=p.getValue(t.properties,o),s=p.getValue(e.properties,o),t=typeof a,e=typeof s;if("undefined"!=t&&"undefined"!=e&&t==e){var u=void 0;if(a instanceof Date&&(a=a.getTime(),u="Date"),s instanceof Date&&(s=s.getTime(),"Date"!==u))return null;var h=void 0;if("number"==t&&"number"==e)switch(r.interpolation){case"linear":h=a+(s-a)*n;break;case"min":h=Math.min(a,s);break;case"max":h=Math.max(a,s);break;case"avg":h=.5*(a+s)}else"nearest"===r.interpolation&&(h=n<.5?a:s);void 0!==h&&("Date"===u&&(h=new Date(h)),p.setValue(i,o,h))}}return null},p.extractRoutePointsFromFeature=function(t,e){var n,r,i=[];switch(t.geometry.type){case"Point":(n=p.extractRoutePointFromPoint(t,e))&&(i=[n]);break;case"LineString":case"MultiPoint":if(t.properties[e]&&Array.isArray(t.properties[e])&&t.geometry.coordinates.length===t.properties[e].length)for(var o=0,a=t.geometry.coordinates.length;o<a;o++)(r=x.math.parseTimestamp(t.properties[e][o]))&&i.push(new x.data.Feature(new x.data.Point(t.geometry.coordinates[o]),{_timestamp:r.getTime()}));else if(t.properties.waypoints&&Array.isArray(t.properties.waypoints)&&t.geometry.coordinates.length===t.properties.waypoints.length&&0<t.properties.waypoints.length&&t.properties.waypoints[0].geometry)for(o=0,a=t.geometry.coordinates.length;o<a;o++)"Point"===t.properties.waypoints[o].geometry.type&&(n=p.extractRoutePointFromPoint(t.properties.waypoints[o],e))&&i.push(n)}return 0<i.length?i:null},p.extractRoutePointFromPoint=function(t,e){if(t.properties[e]){e=x.math.parseTimestamp(t.properties[e]);if(void 0!==e)return t.properties._timestamp=e.getTime(),t}return null};var P=p;function p(){}n.prototype.disable=function(){this._stopped||(this._stopped=!0,cancelAnimationFrame(this._animation))},n.prototype.enable=function(){var t=this;t._stopped&&(t._stopped=!1,t._animation=requestAnimationFrame(t._animate.bind(t)))},n.prototype.add=function(t){return t._id||(t._id=this._getUuid()),this._idTable[t._id]||(this._queue.push(t),this._idTable[t._id]=t),t._id},n.prototype.getById=function(t){return this._idTable[t]},n.prototype.remove=function(t){if(t){var e=t._id;if(this._idTable[e])for(var n=this._queue,r=n.length-1;0<=r;r--)if(e===n[r]._id){this._queue=n.splice(r,1),this._idTable[e]=void 0;break}}},n.prototype.removeById=function(t){this.remove(this._idTable[t])},n.prototype._animate=function(){var t=this;if(!t._stopped){var e=performance.now();if(e-t._lastTime>=t._minFR){for(var n=t._queue,r=n.length-1;0<=r;r--)try{n[r]._onAnimationProgress(e)}catch(t){}t._lastTime=e}t._animation=requestAnimationFrame(t._animate.bind(t))}},n.prototype._getUuid=function(){return this._idCounter++},n.instance=new n;var s=n;function n(){this._animation=null,this._queue=[],this._minFR=33,this._stopped=!0,this._idCounter=1234567890,this._idTable={},this._lastTime=performance.now(),this.enable()}t(i,B=x.internal.EventEmitter),i.prototype.dispose=function(){var t=this;t.stop(),s.instance.remove(t),t._options=null,t._easing=null,t._start=null,t._onComplete=null,t._id=void 0,t._rawProgress=null},i.prototype.getDuration=function(){var t=this._options;return t.loop?1/0:t.duration/t.speedMultiplier},i.prototype.getOptions=function(){return Object.assign({},this._options)},i.prototype.isPlaying=function(){return null!==this._start},i.prototype.play=function(t){var e=this;t&&e.reset(),1<=e._rawProgress&&(e._rawProgress=0),e._start=0<e._rawProgress?P.getStartTime(e._rawProgress,e._options.duration,e._options.speedMultiplier):performance.now()},i.prototype.pause=function(){this._start=null},i.prototype.seek=function(t){var e,n=this;"number"==typeof t&&((e=n.isPlaying())&&n.pause(),n._rawProgress=Math.min(Math.max(t,0),1)/n._options.speedMultiplier,n._processFrame(),e)&&n.play()},i.prototype.setOptions=function(t){var e,n,r,i,o;t&&(n=(e=this)._options,t.easing&&("string"==typeof t.easing&&a[t.easing]?(e._easing=a[t.easing],n.easing=t.easing):t.easing instanceof Function&&(e._easing=t.easing,n.easing=t.easing)),"boolean"==typeof t.loop&&(n.loop=t.loop),"boolean"==typeof t.disposeOnComplete&&(n.disposeOnComplete=t.disposeOnComplete),"boolean"==typeof t.reverse&&(n.reverse=t.reverse),"number"==typeof t.speedMultiplier&&0<t.speedMultiplier&&(n.speedMultiplier=t.speedMultiplier),r="number"==typeof t.duration&&0<t.duration&&n.duration!==t.duration,i="boolean"==typeof t.autoPlay,r||i)&&((o=e.isPlaying())&&e.pause(),i&&(n.autoPlay=t.autoPlay||n.autoPlay,!o)&&t.autoPlay&&(o=!0),r&&(n.duration=t.duration||n.duration),o)&&e.play()},i.prototype.stop=function(){this._rawProgress=1,this._processFrame(),this._start=null},i.prototype.reset=function(){this._start=null,this._rawProgress=0,this._processFrame()},i.prototype._onAnimationProgress=function(t){var e=this;e._start&&(e._rawProgress=P.getProgress(t,e._start,e._options.duration,e._options.speedMultiplier),e._processFrame())},i.prototype._processFrame=function(){var t,e,n,r=this,i=r._options;void 0!==r._id&&(1<=(t=r._rawProgress||0)&&(i.loop?(r._rawProgress=0,r._start=performance.now()):(r._rawProgress=1,r._start=null,r._onComplete&&r._onComplete())),n=i.reverse?1-r._rawProgress:r._rawProgress,r._easing&&(t=r._easing(n)),e=r.onAnimationProgress(t),n=Object.assign({progress:n,easingProgress:t,animation:r},e||{}),r._invokeEvent("onprogress",Object.assign({type:"onprogress"},n)),null===r._start&&r._invokeEvent("oncomplete",Object.assign({type:"oncomplete"},n)),i.disposeOnComplete)&&r.dispose()};var B,r=i;function i(t){var e=B.call(this)||this,n=(e._start=null,e._rawProgress=0,e._options={duration:1e3,autoPlay:!1,easing:"linear",loop:!1,reverse:!1,speedMultiplier:1,disposeOnComplete:!1},e._easing=a.linear,e);return n._id=s.instance.add(n),n.setOptions(t),e}t(o,H=r),o.prototype.getCurrentFrameIdx=function(){return this._numFrames<=0?-1:this._curFrameIdx},o.prototype.getNumberOfFrames=function(){return this._numFrames},o.prototype.setFrameIdx=function(t){(0<=t||t<this._numFrames)&&this.seek(this._numFrames/t)},o.prototype.setNumberOfFrames=function(t){var e=this;"number"==typeof t&&e._numFrames!==t&&(e._numFrames=Math.max(t,0),e._curFrameIdx=t<e._curFrameIdx?e._curFrameIdx:0,t<=0&&(e._curFrameIdx=-1),e._triggerFrame(e._curFrameIdx))},o.prototype.onAnimationProgress=function(t){var e=this._numFrames;if(0<e){t=Math.round(t*e-.5);if(t!==this._curFrameIdx)return t===e?t--:t<0&&(t=-1),this._triggerFrame(t),{frameIdx:t}}return null},o.prototype._triggerFrame=function(t){var e=this;e._onFrame&&-1!==t&&e._onFrame(t),-1!==(e._curFrameIdx=t)&&e._invokeEvent("onframe",{type:"onFrame",frameIdx:t,animation:e,numFrames:e._numFrames})};var H,N=o;function o(t,e,n){var r=H.call(this,n)||this,i=(r._numFrames=0,r._curFrameIdx=-1,r);return i._numFrames=t,i._onFrame=e,n&&n.autoPlay&&i.play(),r}t(u,V=x.layer.Layer),u.prototype.dispose=function(){var t=this;t._animation.stop(),s.instance.remove(t),s.instance.remove(t._animation),t._animation=void 0,t._onComplete=void 0,t._id=void 0,t._options=void 0},u.prototype.getDuration=function(){return this._options.loop?1/0:this._options.duration},u.prototype.getOptions=function(){return Object.assign({},this._options,this._animation.getOptions())},u.prototype.getPlayableAnimation=function(){return this._animation},u.prototype.isPlaying=function(){return this._animation.isPlaying()},u.prototype.pause=function(){this._animation.pause()},u.prototype.play=function(){this._animation.play()},u.prototype.reset=function(){this._animation.reset()},u.prototype.stop=function(){this._animation.stop()},u.prototype.setFrameIdx=function(t){this._animation.setFrameIdx(t)},u.prototype.setOptions=function(t){var e,n,r=this,i=r._animation,o=r._map,a=r._options,s=r._tileLayers;t&&(t.tileLayerOptions&&(0<s.length&&(o&&o.layers.remove(s),s=[],r._tileLayers=s,r._currentTileLayer=null),t.tileLayerOptions.forEach(function(t){t.fadeDuration=0,t.visible=!0,s.push(new x.layer.TileLayer(Object.assign({},t,{opacity:0})))}),o&&o.layers.add(s,r),a.tileLayerOptions=t.tileLayerOptions,i&&i.setNumberOfFrames(a.tileLayerOptions.length),0<=(e=i?r._animation.getCurrentFrameIdx():0))&&(r._currentTileLayer=s[e],r._currentTileLayer.setOptions({fadeDuration:0,visible:!0})),"boolean"==typeof t.visible)&&(a.visible=t.visible,t.visible?(e=i.getCurrentFrameIdx(),0<t.tileLayerOptions.length&&r._currentTileLayer.setOptions({fadeDuration:0,opacity:t.tileLayerOptions[e].opacity})):s.forEach(function(t){return t.setOptions({opacity:0})})),i&&(n=!1,Object.keys(t).forEach(function(t){switch(t){case"tileLayerOptions":case"visible":break;default:n=!0}}),n)&&i.setOptions(t)},u.prototype.onAdd=function(t){(this._map=t).layers.add(this._tileLayers,this)},u.prototype.onRemove=function(){var t=this,n=(t.pause(),t._map);t._map=null,setTimeout(function(){var e=n.layers.getLayers();t._tileLayers.forEach(function(t){-1<e.indexOf(t)&&n.layers.remove(t)})},0)},u.prototype._buildLayers=function(){return[]},u.prototype._getLayerIds=function(){var e=[];return this._tileLayers.forEach(function(t){e.push(t.getId())}),e},u.prototype._buildSource=function(){return null},u.prototype._getSourceId=function(){return null},u.prototype._onAnimationProgress=function(t){return null};var V,R=u;function u(t){var a=V.call(this)||this,e=(a._tileLayers=[],a._options={tileLayerOptions:[],visible:!0},a._onFrame=function(t){var e,n,r,i=a,o=i._options;i._map&&o.visible&&o.tileLayerOptions&&0<o.tileLayerOptions.length&&t<o.tileLayerOptions.length&&(e=i._map.map,r=void 0,(n=i._currentTileLayer)&&(r=n.getId(),e.setPaintProperty(r,"raster-opacity-transition",{duration:0,delay:0}),e.setPaintProperty(r,"raster-opacity",0)),n=i._tileLayers[t],r=(i._currentTileLayer=n).getId(),e.setPaintProperty(r,"raster-opacity-transition",{duration:0,delay:0}),e.setPaintProperty(r,"raster-opacity",o.tileLayerOptions[t].opacity))},a),n=(e._id=s.instance.add(e),0);return t&&(e.setOptions(t),t.tileLayerOptions)&&(n=t.tileLayerOptions.length),e._animation=new N(n,e._onFrame,t),e._onComplete=e._animation._onComplete,a}var Q,R=Object.freeze({__proto__:null,AnimatedTileLayer:u}),J=(t(X,Q=r),X.prototype.onAnimationProgress=function(t){for(var e=this._shapes,n=0,r=e.length;n<r;n++){var i,o=this._y0[n]-this._height*(1-t),o=[this._x0[n],o];e[n]instanceof x.Shape?(i=e[n]).setProperties(Object.assign(i.getProperties(),{offset:o,opacity:0!==t?1:0})):e[n].setOptions({pixelOffset:o,visible:0!==t})}return null},X);function X(t,e,n,r){var i=Q.call(this,r)||this;if(i._height=200,!(t&&0<t.length))throw"No shape specified for animation.";var o=i,a=(o._shapes=t,[]),s=(o._x0=a,[]),u=(o._y0=s,o._height="number"==typeof n&&0<n?n:o._height,[]),h=void 0,p=void 0,c=void 0,l=[];e instanceof x.source.DataSource&&(p=e),e instanceof x.Map&&(l=(c=e).markers.getMarkers());for(var f,g=0,y=t.length;g<y;g++)h=null,(h=t[g]instanceof x.Shape?t[g].getProperties().offset:t[g].getOptions().pixelOffset)&&Array.isArray(h)&&2<=h.length?(a.push(h[0]),s.push(h[1])):(a.push(0),s.push(0),h=[0,0]),h[1]-=o._height,t[g]instanceof x.Shape?((f=t[g]).setProperties(Object.assign(f.getProperties(),{offset:h,opacity:0})),p&&null===p.getShapeById(t[g].getId())&&u.push(t[g])):((f=t[g]).setOptions({pixelOffset:h,visible:!1}),c&&l&&-1===l.indexOf(f)&&c.markers.add(f));return p&&0<u.length&&p.add(u),r&&r.autoPlay&&o.play(),i}t(l,h=r),l.prototype.dispose=function(){this._pathOptions=null,h.prototype.dispose.call(this)},l.prototype.getOptions=function(){return Object.assign({},h.prototype.getOptions.call(this),this._pathOptions)},l.prototype.setOptions=function(t){var e;t&&(e=this._pathOptions,"number"==typeof t.duration&&0<t.duration&&(e.duration=t.duration||e.duration),"boolean"==typeof t.captureMetadata&&(e.captureMetadata=t.captureMetadata),"boolean"==typeof t.geodesic&&(e.geodesic=t.geodesic),"boolean"==typeof t.reverse&&(e.reverse=t.reverse),"number"==typeof t.pitch&&(e.pitch=t.pitch),"number"==typeof t.zoom&&(e.zoom=t.zoom),"boolean"==typeof t.rotate&&(e.rotate=t.rotate),"number"==typeof t.rotationOffset&&(e.rotationOffset=t.rotationOffset),!t.map&&null!==t.map||(e.map=t.map),h.prototype.setOptions.call(this,t))},l.prototype._setMapCamera=function(t,e,n){var r=this._pathOptions;r.map&&t&&(t={center:t},"number"==typeof r.pitch&&(t.pitch=r.pitch),"number"==typeof r.zoom&&(t.zoom=r.zoom),r.rotate&&"number"==typeof e&&(t.bearing=r.reverse?e+180:e,"number"==typeof r.rotationOffset)&&(t.bearing+=r.rotationOffset),n?(t.type="fly",t.duration=Math.min(60,r.duration)):t.type="jump",r.map.setCamera(t))},l.prototype.onAnimationProgress=function(t){return null};var h,c=l;function l(t){var e=h.call(this,t)||this;return e._pathOptions={duration:1e3},e.setOptions(t),e}t(W,Y=c),W.prototype.setOptions=function(t){t&&Y.prototype.setOptions.call(this,t);var t=this,e=t._originPosition,n=t._destinationPosition,r=x.math,i=x.Pixel;e&&n&&(t._pathOptions.geodesic?(t._dx=r.getDistanceTo(e,n),t._heading=r.getHeading(e,n)):(r=r.mercatorPositionsToPixels([e,n],21),t._originPixel=r[0],180<Math.abs(e[0]-n[0])&&(e=512*Math.pow(2,21),r[0][0]>r[1][0]?r[1][0]+=e:r[0][0]+=e),t._dx=i.getDistance(r[0],r[1]),t._heading=i.getHeading(r[0],r[1])),t._pathOptions.captureMetadata)&&P.setMetadata(t._shape,{heading:t._heading})},W.prototype.onAnimationProgress=function(t){var e,n,r=this,i=r._originPosition,o=r._heading,a=r._destinationPosition,s=x.math,u=r._pathOptions;return i&&a&&u?(e=void 0,n=!1,1===t?e=a:0===t?e=i:(a=r._dx*t,e=u.geodesic?s.getDestination(i,o,a):s.mercatorPixelsToPositions([x.Pixel.getDestination(r._originPixel,o,a)],21)[0],n=!0),P.setCoordinates(r._shape,e),u.map&&r._setMapCamera(e,o,n),{position:e,heading:o}):null};var Y,U=W;function W(t,e,n){var r=Y.call(this)||this,i=r,o=t instanceof x.Shape?t.getCoordinates():t.getOptions().position;return i._originPosition=o,i._shape=t,i._destinationPosition=e,i.setOptions(n),n&&n.autoPlay&&i.play(),r}t(v,$=c),v.prototype.dispose=function(){var e=this;Object.keys(this).forEach(function(t){e[t]=void 0}),$.prototype.dispose.call(this)},v.prototype.setOptions=function(t){var e=this,t=(t&&$.prototype.setOptions.call(this,t),e.isPlaying());if(t&&e.pause(),e._positions){var n=0,r=[],i=[],o=e._positions,a=x.math;if(e._pathOptions.geodesic)for(var s=1,u=o.length;s<u;s++){n+=c=a.getDistanceTo(o[s-1],o[s]),r.push(c);var h=a.getHeading(o[s-1],o[s]);i.push(h)}else for(var p=a.mercatorPositionsToPixels(o,21),s=1,u=(e._pixels=p).length;s<u;s++){n+=c=x.Pixel.getDistance(p[s-1],p[s]),r.push(c);var c,h=P.getPixelHeading(p[s-1],p[s]);i.push(h)}e._totalLength=n,e._distances=r,e._headings=i,e._pathOptions.captureMetadata&&P.setMetadata(e._shape,{heading:e._headings[0]})}t&&e.play()},v.prototype.onAnimationProgress=function(t){var e,n,r=this,i=r._shape,o=r._positions,a=r._headings,s=r._distances,u=r._pathOptions,h=r._totalLength,p=x.math;if(1===t)e=o[o.length-1],n=0<a.length?a[a.length-1]:void 0,u.map&&r._setMapCamera(e,n,!1),P.setCoordinates(i,e,o);else if(0===t)e=o[0],n=0<a.length?a[0]:void 0,u.map&&r._setMapCamera(e,n,!1),P.setCoordinates(i,e,[e,e]);else{var c=h*t,l=null;if(u.geodesic)if(h<c)n=a[a.length-1],l=o.slice(0);else if(c<0)n=a[0],l=o.slice(0,1);else for(var f=0,g=0;g<s.length;g++){if(f+s[g]>=c){n=a[g],(l=o.slice(0,g+1)).push(p.getDestination(o[g],n,c-f));break}f+=s[g]}else{var y=null,m=r._pixels;if(h<c)n=a[a.length-1],y=P.getPixelDestination(m[m.length-1],n,c-h),(l=o.slice(0)).push(p.mercatorPixelsToPositions([y],21)[0]);else if(c<0)n=a[0],y=P.getPixelDestination(m[0],n,c),(l=o.slice(0,1)).push(p.mercatorPixelsToPositions([y],21)[0]);else for(f=0,g=0;g<s.length;g++){if(f+s[g]>=c){n=a[g],y=P.getPixelDestination(m[g],n,c-f),(l=o.slice(0,g+1)).push(p.mercatorPixelsToPositions([y],21)[0]);break}f+=s[g]}}l&&0<l.length&&(e=l[l.length-1],u.map&&r._setMapCamera(e,n,2<l.length),P.setCoordinates(i,e,l))}return u.captureMetadata&&P.setMetadata(i,{heading:n}),{position:e,heading:n}};var $,K,tt,et,f,nt,rt,g,it,ot,at,F,st,ut,ht,pt,ct,lt,ft,gt,y,yt,mt,vt,E,dt,_t,m,xt,Pt,Mt,bt,wt,Ot,Lt,At,Ct,It,kt,St,Tt,Ft,Et,qt=v;function v(t,e,n){var r=$.call(this)||this,i=r;return i._shape=e,i._positions=t,i.setOptions(Object.assign({rotate:!0,rotationOffset:0},n||{})),n&&n.autoPlay&&i.play(),r}var d=(T={exports:{}}).exports;function _(t){return 48<=t&&t<=57}function Dt(t){this.index=0,this.path=t,this.max=t.length,this.result=[],this.param=0,this.err="",this.segmentStart=0,this.data=[]}function jt(t){for(;t.index<t.max&&(10===(e=t.path.charCodeAt(t.index))||13===e||8232===e||8233===e||32===e||9===e||11===e||12===e||160===e||5760<=e&&0<=nt.indexOf(e));)t.index++;var e}function Zt(t){var e=t.path[t.segmentStart],n=e.toLowerCase(),r=t.data;if("m"===n&&2<r.length&&(t.result.push([e,r[0],r[1]]),r=r.slice(2),n="l",e="m"===e?"l":"L"),"r"===n)t.result.push([e].concat(r));else for(;r.length>=f[n]&&(t.result.push([e].concat(r.splice(0,f[n]))),f[n]););}function M(){if(!(this instanceof M))return new M;this.queue=[],this.cache=null}function Gt(t,e,n,r){var i=t*r-e*n<0?-1:1,n=(t*n+e*r)/(Math.sqrt(t*t+e*e)*Math.sqrt(t*t+e*e));return(n=1<n?1:n)<-1&&(n=-1),i*Math.acos(n)}function b(t,e,n){if(!(this instanceof b))return new b(t,e,n);this.rx=t,this.ry=e,this.ax=n}function w(t){if(!(this instanceof w))return new w(t);t=rt(t);this.segments=t.segments,this.err=t.err,this.__stack=[]}function zt(t,e,n,r,i,o,a,s){this.a={x:t,y:e},this.b={x:n,y:r},this.c={x:i,y:o},this.d={x:a,y:s},null!=a&&null!=s?(this.getArcLength=Xt,this.getPoint=Rt,this.getDerivative=Ht):(this.getArcLength=Qt,this.getPoint=Vt,this.getDerivative=Bt),this.init()}function Bt(t,e,n){return{x:2*(1-n)*(t[1]-t[0])+2*n*(t[2]-t[1]),y:2*(1-n)*(e[1]-e[0])+2*n*(e[2]-e[1])}}function Ht(t,e,n){return Vt([3*(t[1]-t[0]),3*(t[2]-t[1]),3*(t[3]-t[2])],[3*(e[1]-e[0]),3*(e[2]-e[1]),3*(e[3]-e[2])],n)}function Nt(t,e,n,r,i){for(var o=1,a=t/e,s=(t-n(r,i,a))/e;.001<o;){var u=n(r,i,a+s),h=n(r,i,a-s),u=Math.abs(t-u)/e,h=Math.abs(t-h)/e;u<o?(o=u,a+=s):h<o?(o=h,a-=s):s/=2}return a}function Vt(t,e,n){return{x:(1-n)*(1-n)*t[0]+2*(1-n)*n*t[1]+n*n*t[2],y:(1-n)*(1-n)*e[0]+2*(1-n)*n*e[1]+n*n*e[2]}}function Rt(t,e,n){return{x:(1-n)*(1-n)*(1-n)*t[0]+3*(1-n)*(1-n)*n*t[1]+3*(1-n)*n*n*t[2]+n*n*n*t[3],y:(1-n)*(1-n)*(1-n)*e[0]+3*(1-n)*(1-n)*n*e[1]+3*(1-n)*n*n*e[2]+n*n*n*e[3]}}function Qt(t,e,n){void 0===n&&(n=1);var r=t[0]-2*t[1]+t[2],i=e[0]-2*e[1]+e[2],o=2*t[1]-2*t[0],a=2*e[1]-2*e[0],s=4*(r*r+i*i),r=4*(r*o+i*a),i=o*o+a*a;return 0==s?n*Math.sqrt(Math.pow(t[2]-t[0],2)+Math.pow(e[2]-e[0],2)):(a=n+(o=r/(2*s)),t=i/s-o*o,Math.sqrt(s)/2*(a*Math.sqrt(a*a+t)-o*Math.sqrt(o*o+t)+t*Math.log(Math.abs((a+Math.sqrt(a*a+t))/(o+Math.sqrt(o*o+t))))))}function Jt(t,e,n){var r,i,o,a,s=n.length-1;if(0==s)return 0;if(0===t){for(o=i=0;o<=s;o++)i+=(a=o,vt[s][a]*Math.pow(1-e,s-o)*Math.pow(e,o)*n[o]);return i}for(r=new Array(s),o=0;o<s;o++)r[o]=s*(n[o+1]-n[o]);return Jt(t-1,e,r)}function Xt(t,e,n){for(var r,i,o,a,s=(n=void 0===n?1:n)/2,u=r=0;u<20;u++)a=s*yt[20][u]+s,r+=mt[20][u]*(o=e,i=Jt(1,a=a,i=t),a=Jt(1,a,o),Math.sqrt(i*i+a*a));return s*r}function Yt(t,e,n,r){var i=t*n+e*r;return(i=1<i?1:i)<-1&&(i=-1),(t*r-e*n<0?-1:1)*Math.acos(i)}function Ut(t,e,n,r,i,o,a,s,u){var h=0,p=[],c=[];dt(t,e,n,r,i,o,a,s,u).forEach(function(t){var t=new y(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]),e=t.getTotalLength();h+=e,p.push(e),c.push(t)}),this.length=h,this.partialLengths=p,this.curves=c}function Wt(t,e,n,r){this.x0=t,this.x1=e,this.y0=n,this.y1=r}function O(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}function $t(t,e,n){return[t[0]+(e[0]-t[0])*n,t[1]+(e[1]-t[1])*n]}function Kt(t,n,r){var i=t.map(function(t,e){return r=t,i=n[e],function(n){return r.map(function(t,e){return t+n*(i[e]-t)})};var r,i});return function(e){var t=i.map(function(t){return t(e)});return r?ie(t):t}}function te(t){return"number"==typeof t&&isFinite(t)}function ee(t){return(t=>{for(var e=0;e<t.length-2;e++){var n=t[e],r=t[e+1],i=t[e+2];if(n[0]*(r[1]-i[1])+r[0]*(i[1]-n[1])+i[0]*(n[1]-r[1]))return 1}})(t)?tt(t):[(t[0][0]+t[t.length-1][0])/2,(t[0][1]+t[t.length-1][1])/2]}function ne(t){return new pt(t).abs()}function re(t){return t.toString().split("M").map(function(t,e){return t=t.trim(),e&&t?"M"+t:t}).filter(function(t){return t})}function ie(t){return"M"+t.join("L")+"Z"}function oe(t,e){t=ne(t);return(t=>{var e=t.segments||[],n=[];if(!e.length||"M"!==e[0][0])return!1;for(var r=0;r<e.length;r++){var i=e[r],o=i[0],a=i[1],i=i[2];if("M"===o&&r||"Z"===o)break;if("M"===o||"L"===o)n.push([a,i]);else if("H"===o)n.push([a,n[n.length-1][1]]);else{if("V"!==o)return!1;n.push([n[n.length-1][0],a])}}return!!n.length&&{ring:n}})(t)||((t,e)=>{var n,r,t=re(t)[0],i=[],o=3;if(!t)throw new TypeError(Pt);r=(t=>{if("undefined"!=typeof window&&window&&window.document)try{var e=window.document.createElementNS("http://www.w3.org/2000/svg","path");return e.setAttributeNS(null,"d",t),e}catch(t){}return xt(t)})(t),n=r.getTotalLength(),e&&te(e)&&0<e&&(o=Math.max(o,Math.ceil(n/e)));for(var a=0;a<o;a++){var s=r.getPointAtLength(n*a/o);i.push([s.x,s.y])}return{ring:i,skipBisect:!0}})(t,e)}function ae(t,e){for(var n=t.length+e,r=et(t)/e,i=0,o=0,a=r/2;t.length<n;){var s=t[i],u=t[(i+1)%t.length],h=O(s,u);a<=o+h?(t.splice(i+1,0,h?$t(s,u,(a-o)/h):s.slice(0)),a+=r):(o+=h,i++)}}function L(t,e){var n,r;if("string"==typeof t){var i=oe(t,e);t=i.ring,i=i.skipBisect}else if(!Array.isArray(t))throw new TypeError(Pt);if((t=t.slice(0)).every(function(t){return Array.isArray(t)&&2<=t.length&&te(t[0])&&te(t[1])})){if(1<t.length&&(n=t[0],r=t[t.length-1],O(n,r)<1e-9)&&t.pop(),0<K(t)&&t.reverse(),!i&&e&&te(e)&&0<e){var o=t;var a=e;void 0===a&&(a=1/0);for(var s=0;s<o.length;s++)for(var u=o[s],h=s===o.length-1?o[0]:o[s+1];O(u,h)>a;)h=$t(u,h,.5),o.splice(s+1,0,h)}return t}throw new TypeError(Pt)}function se(t,e,n){var r=t.length-e.length;return ae(t,r<0?-1*r:0),ae(e,0<r?r:0),Mt(t,e),Kt(t,e,n)}function ue(t,e,n){n=n||2;var r,i,o,a,s,u=e&&e.length,h=u?e[0]*n:t.length,p=he(t,0,h,n,!0),c=[];if(p){if(u&&(p=((t,e,n,r)=>{var i,o,a,s,u=[];for(i=0,o=e.length;i<o;i++)s=e[i]*r,a=i<o-1?e[i+1]*r:t.length,(s=he(t,s,a,r,!1))===s.next&&(s.steiner=!0),u.push((t=>{for(var e=t,n=t;e.x<n.x&&(n=e),(e=e.next)!==t;);return n})(s));for(u.sort(le),i=0;i<u.length;i++){{h=void 0;p=void 0;var h=u[i];var p=n;(p=((t,e)=>{var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&a<s){if((a=s)===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}}while((r=r.next)!==e);if(!n)return null;if(i===a)return n.prev;var u,h=n,p=n.x,c=n.y,l=1/0;for(r=n.next;r!==h;)i>=r.x&&r.x>=p&&ge(o<c?i:a,o,p,c,o<c?a:i,o,r.x,r.y)&&((u=Math.abs(o-r.y)/(i-r.x))<l||u===l&&r.x>n.x)&&me(r,t)&&(n=r,l=u),r=r.next;return n})(h,p))&&pe(p=ve(p,h),p.next)}n=pe(n,n.next)}return n})(t,e,p,n)),t.length>80*n){for(var l=r=t[0],f=i=t[1],g=n;g<h;g+=n)(o=t[g])<l&&(l=o),(a=t[g+1])<f&&(f=a),r<o&&(r=o),i<a&&(i=a);s=Math.max(r-l,i-f)}ce(p,c,n,l,f,s)}return c}function he(t,e,n,r,i){var o,a;if(i===0<Pe(t,e,n,r))for(o=e;o<n;o+=r)a=de(o,t[o],t[o+1],a);else for(o=n-r;e<=o;o-=r)a=de(o,t[o],t[o+1],a);return a&&C(a,a.next)&&(_e(a),a=a.next),a}function pe(t,e){if(!t)return t;e=e||t;var n,r=t;do{if(n=!1,r.steiner||!C(r,r.next)&&0!==A(r.prev,r,r.next))r=r.next;else{if(_e(r),(r=e=r.prev)===r.next)return null;n=!0}}while(n||r!==e);return e}function ce(t,e,n,r,i,o,a){if(t){if(!a&&o){var s=t;var u=r;var h=i;var p=o;for(var c=s;null===c.z&&(c.z=fe(c.x,c.y,u,h,p)),c.prevZ=c.prev,c.nextZ=c.next,(c=c.next)!==s;);c.prevZ.nextZ=null,c.prevZ=null;var l,f,g,y,m,v,d,_,x=c,P=1;do{for(f=x,m=x=null,v=0;f;){for(v++,g=f,l=d=0;l<P&&(d++,g=g.nextZ);l++);for(_=P;0<d||0<_&&g;)0!==d&&(0===_||!g||f.z<=g.z)?(f=(y=f).nextZ,d--):(g=(y=g).nextZ,_--),m?m.nextZ=y:x=y,y.prevZ=m,m=y;f=g}}while(m.nextZ=null,P*=2,1<v)}for(var M,b,w=t;t.prev!==t.next;)if(M=t.prev,b=t.next,o?((t,e,n,r)=>{var i=t.prev,o=t,a=t.next;if(!(0<=A(i,o,a))){for(var s=(i.x<o.x?i.x<a.x?i:a:o.x<a.x?o:a).x,u=(i.y<o.y?i.y<a.y?i:a:o.y<a.y?o:a).y,h=(o.x<i.x?i.x>a.x?i:a:o.x>a.x?o:a).x,p=(o.y<i.y?i.y>a.y?i:a:o.y>a.y?o:a).y,c=fe(s,u,e,n,r),l=fe(h,p,e,n,r),f=t.nextZ;f&&f.z<=l;){if(f!==t.prev&&f!==t.next&&ge(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&0<=A(f.prev,f,f.next))return;f=f.nextZ}for(f=t.prevZ;f&&f.z>=c;){if(f!==t.prev&&f!==t.next&&ge(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&0<=A(f.prev,f,f.next))return;f=f.prevZ}return 1}})(t,r,i,o):(t=>{var e=t.prev,n=t,r=t.next;if(!(0<=A(e,n,r))){for(var i=t.next.next;i!==t.prev;){if(ge(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&0<=A(i.prev,i,i.next))return;i=i.next}return 1}})(t))e.push(M.i/n),e.push(t.i/n),e.push(b.i/n),_e(t),t=b.next,w=b.next;else if((t=b)===w){a?1===a?ce(t=((t,e,n)=>{var r=t;do{var i=r.prev,o=r.next.next}while(!C(i,o)&&ye(i,r,r.next,o)&&me(i,o)&&me(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),_e(r),_e(r.next),r=t=o),(r=r.next)!==t);return r})(t,e,n),e,n,r,i,o,2):2===a&&((t,e,n,r,i,o)=>{var a=t;do{for(var s,u=a.next.next;u!==a.prev;){if(a.i!==u.i&&((t,e)=>t.next.i!==e.i&&t.prev.i!==e.i&&!((t,e)=>{var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&ye(n,n.next,t,e))return 1}while((n=n.next)!==t)})(t,e)&&me(t,e)&&me(e,t)&&((t,e)=>{for(var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;n.y>o!=n.next.y>o&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),(n=n.next)!==t;);return r})(t,e))(a,u))return s=ve(a,u),a=pe(a,a.next),s=pe(s,s.next),ce(a,e,n,r,i,o),ce(s,e,n,r,i,o);u=u.next}}while((a=a.next)!==t)})(t,e,n,r,i,o):ce(pe(t),e,n,r,i,o,1);break}}}function le(t,e){return t.x-e.x}function fe(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)/i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)/i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function ge(t,e,n,r,i,o,a,s){return 0<=(i-a)*(e-s)-(t-a)*(o-s)&&0<=(t-a)*(r-s)-(n-a)*(e-s)&&0<=(n-a)*(o-s)-(i-a)*(r-s)}function A(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function C(t,e){return t.x===e.x&&t.y===e.y}function ye(t,e,n,r){return C(t,e)&&C(n,r)||C(t,r)&&C(n,e)||0<A(t,e,n)!=0<A(t,e,r)&&0<A(n,r,t)!=0<A(n,r,e)}function me(t,e){return A(t.prev,t,t.next)<0?0<=A(t,e,t.next)&&0<=A(t,t.prev,e):A(t,e,t.prev)<0||A(t,t.next,e)<0}function ve(t,e){var n=new xe(t.i,t.x,t.y),r=new xe(e.i,e.x,e.y),i=t.next,o=e.prev;return(t.next=e).prev=t,(n.next=i).prev=n,r.next=n,(o.next=n.prev=r).prev=o,r}function de(t,e,n,r){t=new xe(t,e,n);return r?(t.next=r.next,(t.prev=r).next.prev=t,r.next=t):(t.prev=t).next=t,t}function _e(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function xe(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Pe(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}function Me(t,e){var n=e.id,r=e.bbox,i=null==e.properties?{}:e.properties,t=be(t,e);return null==n&&null==r?{type:"Feature",properties:i,geometry:t}:null==r?{type:"Feature",id:n,properties:i,geometry:t}:{type:"Feature",id:n,bbox:r,properties:i,geometry:t}}function be(t,e){function i(t){return h(t)}function o(t){for(var e=[],n=0,r=t.length;n<r;++n){i=void 0;o=void 0;a=void 0;s=void 0;u=void 0;var i=t[n];var o=e;o.length&&o.pop();for(var a=p[i<0?~i:i],s=0,u=a.length;s<u;++s)o.push(h(a[s],s));i<0&&Lt(o,u)}return e.length<2&&e.push(e[0]),e}function n(t){for(var e=o(t);e.length<4;)e.push(e[0]);return e}function a(t){return t.map(n)}var h=Ot(t.transform),p=t.arcs;return function t(e){var n,r=e.type;switch(r){case"GeometryCollection":return{type:r,geometries:e.geometries.map(t)};case"Point":n=i(e.coordinates);break;case"MultiPoint":n=e.coordinates.map(i);break;case"LineString":n=o(e.arcs);break;case"MultiLineString":n=e.arcs.map(o);break;case"Polygon":n=a(e.arcs);break;case"MultiPolygon":n=e.arcs.map(a);break;default:return null}return{type:r,coordinates:n}}(e)}function we(t,e,n){var r,i=(n=void 0===n?{}:n).maxSegmentLength,o=(void 0===i&&(i=10),n.string),n=(void 0===o&&(o=!0),n.single),a=(void 0===n&&(n=!1),L(t,i));return a.length<e.length+2&&ae(a,e.length+2-a.length),Oe(Ft(a,e.length),e.map(function(t){return L(t,i)}),{match:!0,string:o,single:n,t0:"string"==typeof t&&t,t1:r=n&&!e.every(function(t){return"string"==typeof t})?r:e.slice(0)})}function Oe(n,r,t){var e,i=(t=void 0===t?{}:t).string,o=t.single,a=t.t0,s=t.t1,t=t.match,u=t?Et(n,r):n.map(function(t,e){return e}),h=u.map(function(t,e){return se(n[t],r[e],i)});return t&&Array.isArray(a)&&(a=u.map(function(t){return a[t]})),o&&i&&(Array.isArray(a)&&(a=a.join(" ")),Array.isArray(s))&&(s=s.join(" ")),o?(e=i?function(e){return h.map(function(t){return t(e)}).join(" ")}:function(e){return h.map(function(t){return t(e)})},i&&(a||s)?function(t){return t<1e-4&&a||1-t<1e-4&&s||e(t)}:e):i?(a=Array.isArray(a)?a.map(function(t){return"string"==typeof t&&t}):[],s=Array.isArray(s)?s.map(function(t){return"string"==typeof t&&t}):[],h.map(function(e,n){return a[n]||s[n]?function(t){return t<1e-4&&a[n]||1-t<1e-4&&s[n]||e(t)}:e})):h}function Le(t,e,n,r,i){return Ce(function(n){var t=ee(n),r=et(n.concat([n[0]])),i=Math.atan2(n[0][1]-t[1],n[0][0]-t[0]),o=0;return n.map(function(t,e){return e&&(o+=O(t,n[e-1])),t=i+2*Math.PI*(r?o/r:e/n.length),[Math.cos(t)*u+a,Math.sin(t)*u+s]})},r,"M"+(r=(a=t)-(u=n)+","+(s=e))+(o="A"+n+","+n+",0,1,1,")+(t+n)+","+e+o+r+"Z",2*Math.PI*n,i);var o,a,s,u}function Ae(t,e,n,r,i,o){return Ce(function(n){var t=ee(n),r=et(n.concat([n[0]])),t=Math.atan2(n[0][1]-t[1],n[0][0]-t[0]),i=0,o=(t=t<0?2*Math.PI+t:t)/(2*Math.PI);return n.map(function(t,e){e&&(i+=O(t,n[e-1]));e=(t=(o+(r?i/r:e/n.length))%1)<=1/8?[1,.5+4*t]:t<=3/8?[1.5-4*t,1]:t<=5/8?[0,2.5-4*t]:t<=7/8?[4*t-2.5,0]:[1,4*t-3.5];return[a+e[0]*u,s+e[1]*h]})},i,((t,e,n,r)=>"M"+t+","+e+"L"+(n=t+n)+","+e+"L"+n+","+(r=e+r)+"L"+t+","+r+"Z")(a=t,s=e,u=n,h=r),2*n+2*r,o);var a,s,u,h}function Ce(t,e,n,r,i){var o=(i=void 0===i?{}:i).maxSegmentLength,i=i.string;void 0===i&&(i=!0);var a,e=L(e,o=void 0===o?10:o);return te(r)&&e.length<r/o&&ae(e,Math.ceil(r/o-e.length)),r=t(e),a=Kt(r,e,i),i?function(t){return t<1e-4?n:a(t)}:a}d=d,K=function(t){for(var e,n=-1,r=t.length,i=t[r-1],o=0;++n<r;)e=i,i=t[n],o+=e[1]*i[0]-e[0]*i[1];return o/2},tt=function(t){for(var e,n,r=-1,i=t.length,o=0,a=0,s=t[i-1],u=0;++r<i;)e=s,s=t[r],u+=n=e[0]*s[1]-s[0]*e[1],o+=(e[0]+s[0])*n,a+=(e[1]+s[1])*n;return[o/(u*=3),a/u]},et=function(t){for(var e,n,r=-1,i=t.length,o=t[i-1],a=o[0],s=o[1],u=0;++r<i;)e=a,n=s,e-=a=(o=t[r])[0],n-=s=o[1],u+=Math.sqrt(e*e+n*n);return u},f={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},nt=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279],rt=function(t){var e=new Dt(t),n=e.max;for(jt(e);e.index<n&&!e.err.length;)(t=>{var e,n,r,i=t.max;if(t.segmentStart=t.index,(t=>{switch(32|t){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:return 1}})(t.path.charCodeAt(t.index))){if(n=f[t.path[t.index].toLowerCase()],t.index++,jt(t),t.data=[],n)for(e=!1;;){for(r=n;0<r;r--){if((t=>{var e,n=t.index,r=n,i=t.max,o=!1,a=!1,s=!1,u=!1;if(i<=r)t.err="SvgPath: missed param (at pos "+r+")";else if(_(e=43!==(e=t.path.charCodeAt(r))&&45!==e?e:++r<i?t.path.charCodeAt(r):0)||46===e){if(46!==e){if(o=48===e,e=++r<i?t.path.charCodeAt(r):0,o&&r<i&&e&&_(e))return t.err="SvgPath: numbers started with `0` such as `09` are ilegal (at pos "+n+")";for(;r<i&&_(t.path.charCodeAt(r));)r++,a=!0;e=r<i?t.path.charCodeAt(r):0}if(46===e){for(u=!0,r++;_(t.path.charCodeAt(r));)r++,s=!0;e=r<i?t.path.charCodeAt(r):0}if(101===e||69===e){if(u&&!a&&!s)return t.err="SvgPath: invalid float exponent (at pos "+r+")";if(43!==(e=++r<i?t.path.charCodeAt(r):0)&&45!==e||r++,!(r<i&&_(t.path.charCodeAt(r))))return t.err="SvgPath: invalid float exponent (at pos "+r+")";for(;r<i&&_(t.path.charCodeAt(r));)r++}t.index=r,t.param=parseFloat(t.path.slice(n,r))+0}else t.err="SvgPath: param should start with 0..9 or `.` (at pos "+r+")"})(t),t.err.length)return;t.data.push(t.param),jt(t),e=!1,t.index<i&&44===t.path.charCodeAt(t.index)&&(t.index++,jt(t),e=!0)}if(!e){if(t.index>=t.max)break;if(!(t=>48<=t&&t<=57||43===t||45===t||46===t)(t.path.charCodeAt(t.index)))break}}Zt(t)}else t.err="SvgPath: bad command "+t.path[t.index]+" (at pos "+t.index+")"})(e);return e.err.length?e.result=[]:e.result.length&&("mM".indexOf(e.result[0][0])<0?(e.err="SvgPath: string should start with `M` or `m`",e.result=[]):e.result[0][0]="M"),{err:e.err,segments:e.result}},M.prototype.matrix=function(t){return 1===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&0===t[4]&&0===t[5]||(this.cache=null,this.queue.push(t)),this},M.prototype.translate=function(t,e){return 0===t&&0===e||(this.cache=null,this.queue.push([1,0,0,1,t,e])),this},M.prototype.scale=function(t,e){return 1===t&&1===e||(this.cache=null,this.queue.push([t,0,0,e,0,0])),this},M.prototype.rotate=function(t,e,n){var r;return 0!==t&&(this.translate(e,n),t=t*Math.PI/180,r=Math.cos(t),t=Math.sin(t),this.queue.push([r,t,-t,r,0,0]),this.cache=null,this.translate(-e,-n)),this},M.prototype.skewX=function(t){return 0!==t&&(this.cache=null,this.queue.push([1,0,Math.tan(t*Math.PI/180),1,0,0])),this},M.prototype.skewY=function(t){return 0!==t&&(this.cache=null,this.queue.push([1,Math.tan(t*Math.PI/180),0,1,0,0])),this},M.prototype.toArray=function(){if(!this.cache)if(this.queue.length){if(this.cache=this.queue[0],1!==this.queue.length)for(var t,e,n=1;n<this.queue.length;n++)this.cache=(t=this.cache,e=this.queue[n],[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]])}else this.cache=[1,0,0,1,0,0];return this.cache},M.prototype.calc=function(t,e,n){var r;return this.queue.length?(this.cache||(this.cache=this.toArray()),[t*(r=this.cache)[0]+e*r[2]+(n?0:r[4]),t*r[1]+e*r[3]+(n?0:r[5])]):[t,e]},g=M,it={matrix:!0,scale:!0,rotate:!0,translate:!0,skewX:!0,skewY:!0},ot=/\s*(matrix|translate|scale|rotate|skewX|skewY)\s*\(\s*(.+?)\s*\)[\s,]*/,at=/[\s,]+/,F=2*Math.PI,st=function(t,e,n,r,i,o,a,s,u){var h=Math.sin(u*F/360),p=Math.cos(u*F/360),u=p*(t-n)/2+h*(e-r)/2,c=-h*(t-n)/2+p*(e-r)/2;if(0==u&&0==c)return[];if(0===a||0===s)return[];a=Math.abs(a),s=Math.abs(s);var l,f,g,y,m,v,d,_,x,u=u*u/(a*a)+c*c/(s*s),P=(1<u&&(a*=Math.sqrt(u),s*=Math.sqrt(u)),c=i,u=o,(x=(o=(i=a)*i)*(v=(l=s)*l)-o*(_=(m=-(f=h)*((t=t)-(n=n))/2+(g=p)*((e=e)-(r=r))/2)*m)-v*(d=(y=g*(t-n)/2+f*(e-r)/2)*y))<0&&(x=0),x/=o*_+v*d,o=(x=Math.sqrt(x)*(c===u?-1:1))*i/l*m,v=g*o-f*(_=x*-l/i*y)+(t+n)/2,d=f*o+g*_+(e+r)/2,t=(-y-o)/i,n=(-m-_)/l,f=Gt(1,0,c=(y-o)/i,x=(m-_)/l),g=Gt(c,x,t,n),0===u&&0<g&&(g-=F),1===u&&g<0&&(g+=F),[v,d,f,g]),M=[],b=P[2],w=P[3],O=Math.max(Math.ceil(Math.abs(w)/(F/4)),1);w/=O;for(var L,A,C,I,k,S,T=0;T<O;T++)M.push((L=b,A=w,S=k=I=C=void 0,C=4/3*Math.tan(A/4),I=Math.cos(L),k=Math.sin(L),S=Math.cos(L+A),L=Math.sin(L+A),[I,k,I-k*C,k+I*C,S+L*C,L-S*C,S,L])),b+=w;return M.map(function(t){for(var e=0;e<t.length;e+=2){var n=t[e+0],r=t[e+1],i=p*(n*=a)-h*(r*=s),n=h*n+p*r;t[e+0]=i+P[0],t[e+1]=n+P[1]}return t})},ut=Math.PI/180,b.prototype.transform=function(t){var e,n=Math.cos(this.ax*ut),r=Math.sin(this.ax*ut),r=[this.rx*(t[0]*n+t[2]*r),this.rx*(t[1]*n+t[3]*r),this.ry*(-t[0]*r+t[2]*n),this.ry*(-t[1]*r+t[3]*n)],t=r[0]*r[0]+r[2]*r[2],n=r[1]*r[1]+r[3]*r[3],i=((r[0]-r[3])*(r[0]-r[3])+(r[2]+r[1])*(r[2]+r[1]))*((r[0]+r[3])*(r[0]+r[3])+(r[2]-r[1])*(r[2]-r[1])),o=(t+n)/2;return i<1e-10*o?(this.rx=this.ry=Math.sqrt(o),this.ax=0):(r=r[0]*r[1]+r[2]*r[3],e=o+(i=Math.sqrt(i))/2,o=o-i/2,this.ax=Math.abs(r)<1e-10&&Math.abs(e-n)<1e-10?90:180*Math.atan(Math.abs(r)>Math.abs(e-n)?(e-t)/r:r/(e-n))/Math.PI,0<=this.ax?(this.rx=Math.sqrt(e),this.ry=Math.sqrt(o)):(this.ax+=90,this.rx=Math.sqrt(o),this.ry=Math.sqrt(e))),this},b.prototype.isDegenerate=function(){return this.rx<1e-10*this.ry||this.ry<1e-10*this.rx},ht=b,w.prototype.__matrix=function(h){var p,c=this;h.queue.length&&this.iterate(function(t,e,n,r){var i,o,a;switch(t[0]){case"v":o=0===(i=h.calc(0,t[1],!0))[0]?["v",i[1]]:["l",i[0],i[1]];break;case"V":o=(i=h.calc(n,t[1],!1))[0]===h.calc(n,r,!1)[0]?["V",i[1]]:["L",i[0],i[1]];break;case"h":o=0===(i=h.calc(t[1],0,!0))[1]?["h",i[0]]:["l",i[0],i[1]];break;case"H":o=(i=h.calc(t[1],r,!1))[1]===h.calc(n,r,!1)[1]?["H",i[0]]:["L",i[0],i[1]];break;case"a":case"A":var s=h.toArray(),u=ht(t[1],t[2],t[3]).transform(s);(s[0]*s[3]-s[1]*s[2]<0&&(t[5]=t[5]?"0":"1"),i=h.calc(t[6],t[7],"a"===t[0]),"A"===t[0]&&t[6]===n&&t[7]===r||"a"===t[0]&&0===t[6]&&0===t[7])?o=["a"===t[0]?"l":"L",i[0],i[1]]:o=u.isDegenerate()?["a"===t[0]?"l":"L",i[0],i[1]]:[t[0],u.rx,u.ry,u.ax,t[4],t[5],i[0],i[1]];break;case"m":o=["m",(i=h.calc(t[1],t[2],a=0<e))[0],i[1]];break;default:for(o=[s=t[0]],a=s.toLowerCase()===s,p=1;p<t.length;p+=2)i=h.calc(t[p],t[p+1],a),o.push(i[0],i[1])}c.segments[e]=o},!0)},w.prototype.__evaluateStack=function(){var t,e;if(this.__stack.length){if(1===this.__stack.length)this.__matrix(this.__stack[0]);else{for(t=g(),e=this.__stack.length;0<=--e;)t.matrix(this.__stack[e].toArray());this.__matrix(t)}this.__stack=[]}},w.prototype.toString=function(){var t,e=[];this.__evaluateStack();for(var n=0;n<this.segments.length;n++)t=this.segments[n][0],t=0<n&&"m"!==t&&"M"!==t&&t===this.segments[n-1][0],e=e.concat(t?this.segments[n].slice(1):this.segments[n]);return e.join(" ").replace(/ ?([achlmqrstvz]) ?/gi,"$1").replace(/ \-/g,"-").replace(/zm/g,"z m")},w.prototype.translate=function(t,e){return this.__stack.push(g().translate(t,e||0)),this},w.prototype.scale=function(t,e){return this.__stack.push(g().scale(t,e||0===e?e:t)),this},w.prototype.rotate=function(t,e,n){return this.__stack.push(g().rotate(t,e||0,n||0)),this},w.prototype.skewX=function(t){return this.__stack.push(g().skewX(t)),this},w.prototype.skewY=function(t){return this.__stack.push(g().skewY(t)),this},w.prototype.matrix=function(t){return this.__stack.push(g().matrix(t)),this},w.prototype.transform=function(t){return t.trim()&&this.__stack.push((t=t,r=new g,t.split(ot).forEach(function(t){if(t.length)if(void 0!==it[t])e=t;else switch(n=t.split(at).map(function(t){return+t||0}),e){case"matrix":return void(6===n.length&&r.matrix(n));case"scale":return void(1===n.length?r.scale(n[0],n[0]):2===n.length&&r.scale(n[0],n[1]));case"rotate":return void(1===n.length?r.rotate(n[0],0,0):3===n.length&&r.rotate(n[0],n[1],n[2]));case"translate":return void(1===n.length?r.translate(n[0],0):2===n.length&&r.translate(n[0],n[1]));case"skewX":return void(1===n.length&&r.skewX(n[0]));case"skewY":return void(1===n.length&&r.skewY(n[0]))}}),r)),this;var e,n,r},w.prototype.round=function(r){var e,i=0,o=0,a=0,s=0;return r=r||0,this.__evaluateStack(),this.segments.forEach(function(n){var t=n[0].toLowerCase()===n[0];switch(n[0]){case"H":case"h":return t&&(n[1]+=a),a=n[1]-n[1].toFixed(r),void(n[1]=+n[1].toFixed(r));case"V":case"v":return t&&(n[1]+=s),s=n[1]-n[1].toFixed(r),void(n[1]=+n[1].toFixed(r));case"Z":case"z":return a=i,void(s=o);case"M":case"m":return t&&(n[1]+=a,n[2]+=s),a=n[1]-n[1].toFixed(r),s=n[2]-n[2].toFixed(r),i=a,o=s,n[1]=+n[1].toFixed(r),void(n[2]=+n[2].toFixed(r));case"A":case"a":return t&&(n[6]+=a,n[7]+=s),a=n[6]-n[6].toFixed(r),s=n[7]-n[7].toFixed(r),n[1]=+n[1].toFixed(r),n[2]=+n[2].toFixed(r),n[3]=+n[3].toFixed(r+2),n[6]=+n[6].toFixed(r),void(n[7]=+n[7].toFixed(r));default:return e=n.length,t&&(n[e-2]+=a,n[e-1]+=s),a=n[e-2]-n[e-2].toFixed(r),s=n[e-1]-n[e-1].toFixed(r),void n.forEach(function(t,e){e&&(n[e]=+n[e].toFixed(r))})}}),this},w.prototype.iterate=function(i,t){var e,n,r,o=this.segments,a={},s=!1,u=0,h=0,p=0,c=0;if(t||this.__evaluateStack(),o.forEach(function(t,e){var n=i(t,e,u,h),r=(Array.isArray(n)&&(a[e]=n,s=!0),t[0]===t[0].toLowerCase());switch(t[0]){case"m":case"M":return u=t[1]+(r?u:0),p=u,void(c=h=t[2]+(r?h:0));case"h":case"H":return void(u=t[1]+(r?u:0));case"v":case"V":return void(h=t[1]+(r?h:0));case"z":case"Z":return u=p,void(h=c);default:u=t[t.length-2]+(r?u:0),h=t[t.length-1]+(r?h:0)}}),s){for(r=[],e=0;e<o.length;e++)if(void 0!==a[e])for(n=0;n<a[e].length;n++)r.push(a[e][n]);else r.push(o[e]);this.segments=r}return this},w.prototype.abs=function(){return this.iterate(function(t,e,n,r){var i,o=t[0],a=o.toUpperCase();if(o!==a)switch(t[0]=a,o){case"v":return void(t[1]+=r);case"a":return t[6]+=n,void(t[7]+=r);default:for(i=1;i<t.length;i++)t[i]+=i%2?n:r}},!0),this},w.prototype.rel=function(){return this.iterate(function(t,e,n,r){var i,o=t[0],a=o.toLowerCase();if(o!==a&&(0!==e||"M"!==o))switch(t[0]=a,o){case"V":return void(t[1]-=r);case"A":return t[6]-=n,void(t[7]-=r);default:for(i=1;i<t.length;i++)t[i]-=i%2?n:r}},!0),this},w.prototype.unarc=function(){return this.iterate(function(t,e,n,r){var i,o=[],a=t[0];return"A"!==a&&"a"!==a?null:(a="a"===a?(i=n+t[6],r+t[7]):(i=t[6],t[7]),0===(n=st(n,r,i,a,t[4],t[5],t[1],t[2],t[3])).length?[["a"===t[0]?"l":"L",t[6],t[7]]]:(n.forEach(function(t){o.push(["C",t[2],t[3],t[4],t[5],t[6],t[7]])}),o))}),this},w.prototype.unshort=function(){var s,u,h,p,c,l=this.segments;return this.iterate(function(t,e,n,r){var i,o=t[0],a=o.toUpperCase();e&&("T"===a?(h=l[e-1],u="Q"===h[0]?(s=h[1]-n,h[2]-r):"q"===h[0]?(s=h[1]-h[3],h[2]-h[4]):s=0,p=-s,c=-u,(i="t"===o)||(p+=n,c+=r),l[e]=[i?"q":"Q",p,c,t[1],t[2]]):"S"===a&&(h=l[e-1],u="C"===h[0]?(s=h[3]-n,h[4]-r):"c"===h[0]?(s=h[3]-h[5],h[4]-h[6]):s=0,p=-s,c=-u,(i="s"===o)||(p+=n,c+=r),l[e]=[i?"c":"C",p,c,t[1],t[2],t[3],t[4]]))}),this},pt=w,ct={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},lt=/([astvzqmhlc])([^astvzqmhlc]*)/gi,ft=function(t){var i=[];return t.replace(lt,function(t,e,n){var r=e.toLowerCase();for(n=(t=>(t=t.match(gt))?t.map(Number):[])(n),"m"===r&&2<n.length&&(i.push([e].concat(n.splice(0,2))),r="l",e="m"===e?"l":"L");0<=n.length;){if(n.length===ct[r])return n.unshift(e),i.push(n);if(n.length<ct[r])throw new Error("malformed path data");i.push([e].concat(n.splice(0,ct[r])))}}),i},gt=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi,y=function(t,e,n,r,i,o,a,s){return new zt(t,e,n,r,i,o,a,s)},zt.prototype={constructor:zt,init:function(){this.length=this.getArcLength([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y])},getTotalLength:function(){return this.length},getPointAtLength:function(t){t=Nt(t,this.length,this.getArcLength,[this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y]);return this.getPoint([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],t)},getTangentAtLength:function(t){var t=Nt(t,this.length,this.getArcLength,[this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y]),t=this.getDerivative([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],t),e=Math.sqrt(t.x*t.x+t.y*t.y);return 0<e?{x:t.x/e,y:t.y/e}:{x:0,y:0}},getPropertiesAtLength:function(t){var t=Nt(t,this.length,this.getArcLength,[this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y]),e=this.getDerivative([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],t),n=Math.sqrt(e.x*e.x+e.y*e.y),e=0<n?{x:e.x/n,y:e.y/n}:{x:0,y:0},n=this.getPoint([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],t);return{x:n.x,y:n.y,tangentX:e.x,tangentY:e.y}}},yt=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],mt=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],vt=[[1],[1,1],[1,2,1],[1,3,3,1]],E=2*Math.PI,dt=function(t,e,o,a,n,r,i,s,u){var h=Math.sin(n*E/360),p=Math.cos(n*E/360),n=p*(t-s)/2+h*(e-u)/2,c=-h*(t-s)/2+p*(e-u)/2;if(0==n&&0==c)return[];if(0===o||0===a)return[];o=Math.abs(o),a=Math.abs(a);var l,f,g,y,m,v,d,_,x,n=n*n/(o*o)+c*c/(a*a),P=(1<n&&(o*=Math.sqrt(n),a*=Math.sqrt(n)),c=r,n=i,(x=(i=(r=o)*r)*(v=(l=a)*l)-i*(_=(m=-(f=h)*((t=t)-(s=s))/2+(g=p)*((e=e)-(u=u))/2)*m)-v*(d=(y=g*(t-s)/2+f*(e-u)/2)*y))<0&&(x=0),x/=i*_+v*d,i=(x=Math.sqrt(x)*(c===n?-1:1))*r/l*m,v=g*i-f*(_=x*-l/r*y)+(t+s)/2,d=f*i+g*_+(e+u)/2,t=(-y-i)/r,s=(-m-_)/l,f=Yt(1,0,c=(y-i)/r,x=(m-_)/l),g=Yt(c,x,t,s),0===n&&0<g&&(g-=E),1===n&&g<0&&(g+=E),[v,d,f,g]),M=[],b=P[2],w=P[3],O=Math.max(Math.ceil(Math.abs(w)/(E/4)),1);w/=O;for(var L,A,C,I,k,S,T=0;T<O;T++)M.push((L=b,A=w,S=k=I=C=void 0,C=4/3*Math.tan(A/4),I=Math.cos(L),k=Math.sin(L),S=Math.cos(L+A),L=Math.sin(L+A),[I,k,I-k*C,k+I*C,S+L*C,L-S*C,S,L])),b+=w;return M.map(function(t){for(var e=0;e<t.length;e+=2){var n=t[e+0],r=t[e+1],i=p*(n*=o)-h*(r*=a),n=h*n+p*r;t[e+0]=i+P[0],t[e+1]=n+P[1]}return t})},_t=function(t,e,n,r,i,o,a,s,u){return new Ut(t,e,n,r,i,o,a,s,u)},Ut.prototype={constructor:Ut,init:function(){},getTotalLength:function(){return this.length},getPointAtLength:function(t){t<0?t=0:t>this.length&&(t=this.length);for(var e=this.partialLengths.length-1;this.partialLengths[e]>=t&&0<this.partialLengths[e];)e--;e<this.partialLengths.length-1&&e++;for(var n=0,r=0;r<e;r++)n+=this.partialLengths[r];return this.curves[e].getPointAtLength(t-n)},getTangentAtLength:function(t){t<0?t=0:t>this.length&&(t=this.length);for(var e=this.partialLengths.length-1;this.partialLengths[e]>=t&&0<this.partialLengths[e];)e--;e<this.partialLengths.length-1&&e++;for(var n=0,r=0;r<e;r++)n+=this.partialLengths[r];return this.curves[e].getTangentAtLength(t-n)},getPropertiesAtLength:function(t){var e=this.getTangentAtLength(t),t=this.getPointAtLength(t);return{x:t.x,y:t.y,tangentX:e.x,tangentY:e.y}}},m=function(t,e,n,r){return new Wt(t,e,n,r)},Wt.prototype.getTotalLength=function(){return Math.sqrt(Math.pow(this.x0-this.x1,2)+Math.pow(this.y0-this.y1,2))},Wt.prototype.getPointAtLength=function(t){var t=t/Math.sqrt(Math.pow(this.x0-this.x1,2)+Math.pow(this.y0-this.y1,2)),e=(this.x1-this.x0)*t,t=(this.y1-this.y0)*t;return{x:this.x0+e,y:this.y0+t}},Wt.prototype.getTangentAtLength=function(){var t=Math.sqrt((this.x1-this.x0)*(this.x1-this.x0)+(this.y1-this.y0)*(this.y1-this.y0));return{x:(this.x1-this.x0)/t,y:(this.y1-this.y0)/t}},Wt.prototype.getPropertiesAtLength=function(t){var t=this.getPointAtLength(t),e=this.getTangentAtLength();return{x:t.x,y:t.y,tangentX:e.x,tangentY:e.y}},xt=function(t){function a(t){if(!t)return null;for(var e,n=ft(t),r=[0,0],i=[0,0],o=0;o<n.length;o++)"M"===n[o][0]?(r=[n[o][1],n[o][2]],h.push(null)):"m"===n[o][0]?(r=[n[o][1]+r[0],n[o][2]+r[1]],h.push(null)):"L"===n[o][0]?(s+=Math.sqrt(Math.pow(r[0]-n[o][1],2)+Math.pow(r[1]-n[o][2],2)),h.push(new m(r[0],n[o][1],r[1],n[o][2])),r=[n[o][1],n[o][2]]):"l"===n[o][0]?(s+=Math.sqrt(Math.pow(n[o][1],2)+Math.pow(n[o][2],2)),h.push(new m(r[0],n[o][1]+r[0],r[1],n[o][2]+r[1])),r=[n[o][1]+r[0],n[o][2]+r[1]]):"H"===n[o][0]?(s+=Math.abs(r[0]-n[o][1]),h.push(new m(r[0],n[o][1],r[1],r[1])),r[0]=n[o][1]):"h"===n[o][0]?(s+=Math.abs(n[o][1]),h.push(new m(r[0],r[0]+n[o][1],r[1],r[1])),r[0]=n[o][1]+r[0]):"V"===n[o][0]?(s+=Math.abs(r[1]-n[o][1]),h.push(new m(r[0],r[0],r[1],n[o][1])),r[1]=n[o][1]):"v"===n[o][0]?(s+=Math.abs(n[o][1]),h.push(new m(r[0],r[0],r[1],r[1]+n[o][1])),r[1]=n[o][1]+r[1]):"z"===n[o][0]||"Z"===n[o][0]?(s+=Math.sqrt(Math.pow(n[0][1]-r[0],2)+Math.pow(n[0][2]-r[1],2)),h.push(new m(r[0],n[0][1],r[1],n[0][2])),r=[n[0][1],n[0][2]]):"C"===n[o][0]?(e=new y(r[0],r[1],n[o][1],n[o][2],n[o][3],n[o][4],n[o][5],n[o][6]),s+=e.getTotalLength(),r=[n[o][5],n[o][6]],h.push(e)):"c"===n[o][0]?(e=new y(r[0],r[1],r[0]+n[o][1],r[1]+n[o][2],r[0]+n[o][3],r[1]+n[o][4],r[0]+n[o][5],r[1]+n[o][6]),s+=e.getTotalLength(),r=[n[o][5]+r[0],n[o][6]+r[1]],h.push(e)):"S"===n[o][0]?(e=0<o&&-1<["C","c","S","s"].indexOf(n[o-1][0])?new y(r[0],r[1],2*r[0]-n[o-1][n[o-1].length-4],2*r[1]-n[o-1][n[o-1].length-3],n[o][1],n[o][2],n[o][3],n[o][4]):new y(r[0],r[1],r[0],r[1],n[o][1],n[o][2],n[o][3],n[o][4]),s+=e.getTotalLength(),r=[n[o][3],n[o][4]],h.push(e)):"s"===n[o][0]?(e=0<o&&-1<["C","c","S","s"].indexOf(n[o-1][0])?new y(r[0],r[1],r[0]+e.d.x-e.c.x,r[1]+e.d.y-e.c.y,r[0]+n[o][1],r[1]+n[o][2],r[0]+n[o][3],r[1]+n[o][4]):new y(r[0],r[1],r[0],r[1],r[0]+n[o][1],r[1]+n[o][2],r[0]+n[o][3],r[1]+n[o][4]),s+=e.getTotalLength(),r=[n[o][3]+r[0],n[o][4]+r[1]],h.push(e)):"Q"===n[o][0]?(e=new y(r[0],r[1],n[o][1],n[o][2],n[o][3],n[o][4]),s+=e.getTotalLength(),h.push(e),r=[n[o][3],n[o][4]],i=[n[o][1],n[o][2]]):"q"===n[o][0]?(e=new y(r[0],r[1],r[0]+n[o][1],r[1]+n[o][2],r[0]+n[o][3],r[1]+n[o][4]),s+=e.getTotalLength(),i=[r[0]+n[o][1],r[1]+n[o][2]],r=[n[o][3]+r[0],n[o][4]+r[1]],h.push(e)):"T"===n[o][0]?(e=0<o&&-1<["Q","q","T","t"].indexOf(n[o-1][0])?new y(r[0],r[1],2*r[0]-i[0],2*r[1]-i[1],n[o][1],n[o][2]):new m(r[0],n[o][1],r[1],n[o][2]),h.push(e),s+=e.getTotalLength(),i=[2*r[0]-i[0],2*r[1]-i[1]],r=[n[o][1],n[o][2]]):"t"===n[o][0]?(e=0<o&&-1<["Q","q","T","t"].indexOf(n[o-1][0])?new y(r[0],r[1],2*r[0]-i[0],2*r[1]-i[1],r[0]+n[o][1],r[1]+n[o][2]):new m(r[0],r[0]+n[o][1],r[1],r[1]+n[o][2]),s+=e.getTotalLength(),i=[2*r[0]-i[0],2*r[1]-i[1]],r=[n[o][1]+r[0],n[o][2]+r[0]],h.push(e)):"A"===n[o][0]?(e=new _t(r[0],r[1],n[o][1],n[o][2],n[o][3],n[o][4],n[o][5],n[o][6],n[o][7]),s+=e.getTotalLength(),r=[n[o][6],n[o][7]],h.push(e)):"a"===n[o][0]&&(e=new _t(r[0],r[1],n[o][1],n[o][2],n[o][3],n[o][4],n[o][5],r[0]+n[o][6],r[1]+n[o][7]),s+=e.getTotalLength(),r=[r[0]+n[o][6],r[1]+n[o][7]],h.push(e)),u.push(s);return a}var s=0,u=[],h=[],e=(a.getTotalLength=function(){return s},a.getPointAtLength=function(t){t=e(t);return h[t.i].getPointAtLength(t.fraction)},a.getTangentAtLength=function(t){t=e(t);return h[t.i].getTangentAtLength(t.fraction)},a.getPropertiesAtLength=function(t){t=e(t);return h[t.i].getPropertiesAtLength(t.fraction)},function(t){t<0?t=0:s<t&&(t=s);for(var e=u.length-1;t<=u[e]&&0<u[e];)e--;return{fraction:t-u[++e-1],i:e}});return a(t)},Pt='All shapes must be supplied as arrays of [x, y] points or an SVG path string (https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d).\nExample valid ways of supplying a shape would be:\n[[0, 0], [10, 0], [10, 10]]\n"M0,0 L10,0 L10,10Z"\n',Mt=function(r,t){for(var e,i,n,o=r.length,a=1/0,s=0;s<o;s++)(n=>{i=0,t.forEach(function(t,e){e=O(r[(n+e)%o],t);i+=e*e}),i<a&&(a=i,e=n)})(s);e&&(n=r.splice(0,e),r.splice.apply(r,[r.length,0].concat(n)))},(bt=ue).deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,a=Math.abs(Pe(t,0,o,n));if(i)for(var s=0,u=e.length;s<u;s++){var h=e[s]*n,p=s<u-1?e[s+1]*n:t.length;a-=Math.abs(Pe(t,h,p,n))}for(var c=0,s=0;s<r.length;s+=3){var l=r[s]*n,f=r[s+1]*n,g=r[s+2]*n;c+=Math.abs((t[l]-t[g])*(t[1+f]-t[1+l])-(t[l]-t[f])*(t[1+g]-t[1+l]))}return 0===a&&0===c?0:Math.abs((c-a)/a)},ue.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);0<i&&(r+=t[i-1].length,n.holes.push(r))}return n},wt=function(t){return t},Ot=function(t){var o,a,s,u,h,p;return null==t?wt:(s=t.scale[0],u=t.scale[1],h=t.translate[0],p=t.translate[1],function(t,e){e||(o=a=0);var n=2,r=t.length,i=new Array(r);for(i[0]=(o+=t[0])*s+h,i[1]=(a+=t[1])*u+p;n<r;)i[n]=t[n],++n;return i})},Lt=function(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n},At=function(e,t){return"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map(function(t){return Me(e,t)})}:Me(e,t)},Ct=function(s,r){function t(t,e){for(var n in t){n=t[n];delete e[n.start],delete n.start,delete n.end,n.forEach(function(t){i[t<0?~t:t]=1}),o.push(n)}}var i={},u={},h={},o=[],a=-1;return r.forEach(function(t,e){var n=s.arcs[t<0?~t:t];n.length<3&&!n[1][0]&&!n[1][1]&&(n=r[++a],r[a]=t,r[e]=n)}),r.forEach(function(t){o=t,i=s.arcs[o<0?~o:o],a=i[0],s.transform?(n=[0,0],i.forEach(function(t){n[0]+=t[0],n[1]+=t[1]})):n=i[i.length-1];var e,n,r,i=o<0?[n,a]:[a,n],o=i[0],a=i[1];(i=h[o])?(delete h[i.end],i.push(t),i.end=a,(e=u[a])?(delete u[e.start],r=e===i?i:i.concat(e),u[r.start=i.start]=h[r.end=e.end]=r):u[i.start]=h[i.end]=i):(i=u[a])?(delete u[i.start],i.unshift(t),i.start=o,(e=h[o])?(delete h[e.end],r=e===i?i:e.concat(i),u[r.start=e.start]=h[r.end=i.end]=r):u[i.start]=h[i.end]=i):u[(i=[t]).start=o]=h[i.end=a]=i}),t(h,u),t(u,h),r.forEach(function(t){i[t<0?~t:t]||o.push([t])}),o},It=function(t,e){for(var n=0,r=t.length;n<r;){var i=n+r>>>1;t[i]<e?n=1+i:r=i}return n},kt=function(t){function n(t,n){t.forEach(function(t){var e=i[t=t<0?~t:t];e?e.push(n):i[t]=[n]})}function r(t,e){t.forEach(function(t){n(t,e)})}var e,i={},o=t.map(function(){return[]}),a={LineString:n,MultiLineString:r,Polygon:r,MultiPolygon:function(t,e){t.forEach(function(t){r(t,e)})}};for(e in t.forEach(function e(t,n){"GeometryCollection"===t.type?t.geometries.forEach(function(t){e(t,n)}):t.type in a&&a[t.type](t.arcs,n)}),i)for(var s=i[e],u=s.length,h=0;h<u;++h)for(var p=h+1;p<u;++p){var c,l=s[h],f=s[p];(c=o[l])[e=It(c,f)]!==f&&c.splice(e,0,f),(c=o[f])[e=It(c,l)]!==l&&c.splice(e,0,l)}return o},(Tt=function(o){return 1===o.length&&(n=o,o=function(t,e){return St(n(t),e)}),{left:function(t,e,n,r){for(null==n&&(n=0),null==r&&(r=t.length);n<r;){var i=n+r>>>1;o(t[i],e)<0?n=1+i:r=i}return n},right:function(t,e,n,r){for(null==n&&(n=0),null==r&&(r=t.length);n<r;){var i=n+r>>>1;0<o(t[i],e)?r=i:n=1+i}return n}};var n})(St=function(t,e){return t<e?-1:e<t?1:e<=t?0:NaN}),Ft=function(t,e){n=(t=>{for(var e=bt(t.reduce(function(t,e){return t.concat([e[0]],[e[1]])},[])),n=[],r=0,i=e.length;r<i;r+=3)n.push([[e[r],e[r+1]],[e[r+1],e[r+2]],[e[r+2],e[r]]]);return n})(t),i=t,o={},a={type:"Topology",objects:{triangles:{type:"GeometryCollection",geometries:[]}},arcs:[]},n.forEach(function(t){var r=[];t.forEach(function(t,e){var n=t[0]<t[1]?t.join(","):t[1]+","+t[0],t=t.map(function(t){return i[t]});n in o?r.push(~o[n]):(r.push(o[n]=a.arcs.length),a.arcs.push(t))}),a.objects.triangles.geometries.push({type:"Polygon",area:Math.abs(K(t.map(function(t){return i[t[0]]}))),arcs:[r]})}),a.objects.triangles.geometries.sort(function(t,e){return t.area-e.area});for(var n,i,o,a,r=a,s=e,u=r.objects.triangles.geometries,h=Tt(function(t){return t.area}).left;u.length>s;){f=l=c=p=void 0;var p=u[0],c=kt(u)[0][0],l=u[c],f=((s,t)=>{function n(e){e.forEach(function(t){t.forEach(function(t){(h[t=t<0?~t:t]||(h[t]=[])).push(e)})}),r.push(e)}function u(t){for(var e,n=be(s,{type:"Polygon",arcs:[t]}).coordinates[0],r=-1,i=n.length,o=n[i-1],a=0;++r<i;)e=o,o=n[r],a+=e[0]*o[1]-e[1]*o[0];return Math.abs(a)}var h={},r=[],i=[];return t.forEach(function t(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"Polygon":n(e.arcs);break;case"MultiPolygon":e.arcs.forEach(n)}}),r.forEach(function(t){if(!t._){var e=[],n=[t];for(t._=1,i.push(e);t=n.pop();)e.push(t),t.forEach(function(t){t.forEach(function(t){h[t<0?~t:t].forEach(function(t){t._||(t._=1,n.push(t))})})})}}),r.forEach(function(t){delete t._}),{type:"MultiPolygon",arcs:i.map(function(t){var e,n=[];if(t.forEach(function(t){t.forEach(function(t){t.forEach(function(t){h[t<0?~t:t].length<2&&n.push(t)})})}),1<(e=(n=Ct(s,n)).length))for(var r,i,o=1,a=u(n[0]);o<e;++o)(r=u(n[o]))>a&&(i=n[0],n[0]=n[o],n[o]=i,a=r);return n})}})(r,[p,l]);f.area=p.area+l.area,f.type="Polygon",f.arcs=f.arcs[0],u.splice(c,1),u.shift(),u.splice(h(u,f.area),0,f)}if(s>u.length)throw new RangeError("Can't collapse topology into "+s+" pieces.");return At(r,r.objects.triangles).features.map(function(t){return t.geometry.coordinates[0].pop(),t.geometry.coordinates[0]})},Et=function(t,e){var n,s,u,h;return 8<t.length?t.map(function(t,e){return e}):(n=t.map(function(n){return e.map(function(t){var e=n;return(e=O(ee(e),ee(t)))*e})}),s=n,u=1/0,function t(e,n,r){void 0===n&&(n=[]),void 0===r&&(r=0);for(var i=0;i<e.length;i++){var o=e.splice(i,1),a=s[o[0]][n.length];r+a<u&&(e.length?t(e.slice(),n.concat(o),r+a):(u=r+a,h=n.concat(o))),e.length&&e.splice(i,0,o[0])}}(h=t.map(function(t,e){return e})),h)},d.interpolate=function(e,n,t){var r=(t=void 0===t?{}:t).maxSegmentLength,t=t.string;void 0===t&&(t=!0);var i=se(L(e,r=void 0===r?10:r),L(n,r),t);return!t||"string"!=typeof e&&"string"!=typeof n?i:function(t){return t<1e-4&&"string"==typeof e?e:1-t<1e-4&&"string"==typeof n?n:i(t)}},d.separate=we,d.combine=function(t,e,n){var r=(n=void 0===n?{}:n).maxSegmentLength,i=(void 0===r&&(r=10),n.string),n=(void 0===i&&(i=!0),n.single),o=we(e,t,{maxSegmentLength:r,string:i,single:n=void 0!==n&&n});return n?function(t){return o(1-t)}:o.map(function(e){return function(t){return e(1-t)}})},d.interpolateAll=function(t,e,n){var r,i,o,a,s=(n=void 0===n?{}:n).maxSegmentLength,u=(void 0===s&&(s=10),n.string),n=(void 0===u&&(u=!0),n.single);if(void 0===n&&(n=!1),Array.isArray(t)&&Array.isArray(e)&&t.length===e.length&&t.length)return a=function(t){return L(t,s)},o=t.map(a),a=e.map(a),n?(t.every(function(t){return"string"==typeof t})&&(r=t.slice(0)),e.every(function(t){return"string"==typeof t})&&(i=e.slice(0))):(r=t.slice(0),i=e.slice(0)),Oe(o,a,{string:u,single:n,t0:r,t1:i,match:!1});throw new TypeError("flubber.all() expects two arrays of equal length as arguments. Each element in both arrays should be an array of [x, y] points or an SVG path string (https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d).")},d.splitPathString=function(t){return re(ne(t))},d.toPathString=ie,d.fromCircle=Le,d.toCircle=function(t,e,n,r,i){var o=Le(e,n,r,t,i);return function(t){return o(1-t)}},d.fromRect=Ae,d.toRect=function(t,e,n,r,i,o){var a=Ae(e,n,r,i,t,o);return function(t){return a(1-t)}},Object.defineProperty(d,"__esModule",{value:!0});var Ie=(T=T.exports)&&T.__esModule&&Object.prototype.hasOwnProperty.call(T,"default")?T.default:T,ke=(Se.prototype.interpolate=function(t){return this._constPos||this._interp(t)},Se);function Se(t,n){var r=!0;(r=t.length!==n.length?!1:r)&&t.forEach(function(t,e){r=r&&x.data.Position.areEqual(t,n[e])}),r?this._constPos=n:this._interp=Ie.interpolate(t,n,{string:!1})}Fe.prototype.interpolate=function(t){var e=this,n=e._fromGeom,r=e._toGeom;if(e._areSame)return r;if(0===t)return n;if(1===t)return r;var i=n.coordinates,o=r.coordinates,a=e._runInterps(t),s={type:r.type};switch(r.type){case"Point":"LineString"===n.type||"MultiPoint"===n.type?s={type:n.type,coordinates:e._sampleMultiPoint(a,i.length)}:"Polygon"===n.type||"MultiLineString"===n.type?s={type:n.type,coordinates:a}:s.coordinates=a[0][0];break;case"LineString":if("Polygon"===n.type&&i.length>o.length)for(var u=Math.floor(a[0].length/(o.length-1));0<=u;u--)a[0].pop();s.coordinates=a[0];break;case"MultiPoint":"Point"===n.type?s.coordinates=e._sampleMultiPoint(a,o.length):"MultiPoint"!==n.type?s={type:n.type,coordinates:"LineString"===n.type?a[0]:a}:s.coordinates=a[0];break;case"Polygon":case"MultiLineString":s.coordinates=a}return s},Fe.prototype._initInterps=function(){var t=this._fromGeom,e=this._toGeom;if(!this._areSame&&t&&0<t.coordinates.length&&e&&0<e.coordinates.length){var n=t.coordinates,r=e.coordinates,i=[],o=[];switch(t.type){case"Point":i=[[n,n,n]];break;case"LineString":case"MultiPoint":i=[n];break;case"Polygon":case"MultiLineString":i="number"==typeof n[0]?[n]:n}switch(e.type){case"Point":o=[[r,r,r]];break;case"LineString":case"MultiPoint":o=[r];break;case"Polygon":case"MultiLineString":o="number"==typeof r[0]?[r]:r}var a=void 0,s=o.length;if(i.length<o.length)for(a=i.length;a<s;a++)i.push([i[0][0],i[0][0],i[0][0]]);for(a=0;a<s;a++)this._interps.push(new ke(i[a],o[a]))}},Fe.prototype._runInterps=function(t){for(var e=[],n=this._interps,r=0;r<n.length;r++)e.push(n[r].interpolate(t));return e},Fe.prototype._sampleMultiPoint=function(t,e){for(var n=Math.min(Math.ceil(t[0].length/e),e),r=[],i=0;i<e;i++)r.push(t[0][i*n]);return r};var Te=Fe;function Fe(t,e){this._interps=[],this._areSame=!1;if("MultiPolygon"===t.type)throw"Only simple geometries supported.";this._fromGeom=t,this._toGeom=e,this._areSame=t.type===e.type&&JSON.parse(JSON.stringify(t.coordinates))===JSON.parse(JSON.stringify(e.coordinates)),this._initInterps()}qe.prototype.interpolate=function(e){var n,r,t=this._toGeom,i=this._interps;return 0===e?this._fromGeom:1===e?t:"MultiPolygon"===t.type?(n=[],i.forEach(function(t){n.push(t.interpolate(e).coordinates)}),{type:"MultiPolygon",coordinates:n}):"GeometryCollection"===t.type?(r=[],i.forEach(function(t){r.push(t.interpolate(e))}),{type:"GeometryCollection",geometries:r}):i[0].interpolate(e)},qe.prototype._initInterps=function(){var t=this,e=[],n=[];if(t._extractGeoms(t._fromGeom,e),t._extractGeoms(t._toGeom,n),e.length<n.length&&0<e.length){var r=x.data.BoundingBox.getCenter(x.data.BoundingBox.fromData(e[0])),i={type:e[0].type,coordinates:[]};switch(e[0].type){case"Point":i.coordinates=r;break;case"LineString":case"MultiPoint":i.coordinates=[r,r];break;case"MultiLineString":case"Polygon":i.coordinates=[[r,r,r]]}for(var o=e.length,a=n.length;o<a;o++)e.push(i)}for(o=0;o<n.length;o++)t._interps.push(new Te(e[o],n[o]))},qe.prototype._extractGeoms=function(t,e){var n=this;switch(t.type){case"MultiPolygon":t.coordinates.forEach(function(t){e.push({type:"Polygon",coordinates:t})});break;case"GeometryCollection":t.geometries.forEach(function(t){n._extractGeoms(t,e)});break;default:e.push(t)}};var Ee=qe;function qe(t,e){this._interps=[];this._fromGeom=t,this._toGeom=e,this._initInterps()}t(Ze,De=c),Ze.prototype.onAnimationProgress=function(t){var e=this,n=x.data.BoundingBox,t=e._interp.interpolate(t),n=n.getCenter(n.fromData(t)),r=0,r=e._pathOptions.geodesic?e._heading:e._pixelHeading,i=(e._pathOptions.map&&e._setMapCamera(n,r,!0),e._shape);return e._pathOptions.captureMetadata&&i.addProperty("heading",r),i.isCircle()&&"Point"===t.type||(i.data.geometry.type=t.type),i.setCoordinates(t.coordinates),{position:n,heading:r}};var De,je=Ze;function Ze(t,e,n){var r=De.call(this)||this,i=r,o=x.data.BoundingBox,t=((i._shape=t).toJson().geometry,t.isCircle()&&"Point"!==e.type&&new x.data.Polygon(t.getCircleCoordinates()),i._interp=new Ee(t.toJson().geometry,e),o.getCenter(i._shape.getBounds())),o=o.getCenter(o.fromData(e)),e=(i._heading=x.math.getHeading(t,o),x.math.mercatorPositionsToPixels([t,o],21));return i._pixelHeading=P.getPixelHeading(e[0],e[1]),n&&(i.setOptions(n),n.autoPlay)&&i.play(),s.instance.add(i),r}I.prototype.dispose=function(){var e=this;s.instance.remove(e),Object.keys(e).forEach(function(t){e[t]=void 0})},I.prototype.getDuration=function(){return this._numberOfInv*this._delay},I.prototype.isPlaying=function(){return null!=this._start},I.prototype.pause=function(){this._start=null},I.prototype.play=function(){this._start=performance.now()},I.prototype.reset=function(){this._start=null,this._currentInterval=0},I.prototype.stop=function(){this._start=null,this._currentInterval=this._numberOfInv},I.prototype._onAnimationProgress=function(t){var e=this;e._start&&(t=Math.round((t-e._start)/e._delay))!==e._currentInterval&&(e._currentInterval=t,e._intervalCb&&setTimeout(e._intervalCb,0,e._arguments),t>=e._numberOfInv)&&(e._start=null,e._onComplete)&&(e._onComplete(),e.dispose())};var Ge=I;function I(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._delay=1,this._numberOfInv=1/0,this._currentInterval=0;var o=this;o._id=s.instance.add(o),o._intervalCb=t,o._arguments=r,0<=e&&(o._delay=e),0<n&&(o._numberOfInv=n)}t(S,k=c),S.prototype.dispose=function(){var t=this;t._route=null,t._headingInv=null,t._positions=null,t._timestamps=null,t._timeInv=null,t._totalTime=null,t._shape=null,k.prototype.dispose.call(this)},S.prototype.getDuration=function(){return void 0!==this._totalTime?this._totalTime/this._pathOptions.speedMultiplier:k.prototype.getDuration.call(this)},S.prototype.getOptions=function(){return Object.assign({},k.prototype.getOptions.call(this),{valueInterpolations:this._valueInterps})},S.prototype.setOptions=function(t){var e;t&&(e=this,t.valueInterpolations&&Array.isArray(t.valueInterpolations)&&(e._positions=null,e._valueInterps=t.valueInterpolations),k.prototype.setOptions.call(this,t),(t=e.isPlaying())&&e.pause(),e._positions||(e._processPath(),e._pathOptions.captureMetadata&&0<e._headingInv.length&&P.setMetadata(e._shape,{heading:e._headingInv[0],speed:e._speedInv[0],timestamp:e._timestamps[0]})),t)&&e.play()},S.prototype.getTimeSpan=function(){var t=this._timestamps;return 0<t.length?{begin:t[0],end:t[t.length-1]}:null},S.prototype.getPath=function(){return JSON.parse(JSON.stringify(this._positions))},S.prototype.onAnimationProgress=function(t){var e=this,n=e._positions;if(n&&1<n.length){var r,i={},o=0,a=void 0,s=0,u=e._shape,h=e._pathOptions,p=e._headingInv,c=e._speedInv,l=e._timestamps,f=e._route;if(1===t)i={position:n[(o=p.length-1)+1],heading:p[o],speed:c[o],timestamp:l[o+1]},h.map&&e._setMapCamera(i.position,i.heading,!1),P.setCoordinates(u,i.position,n),a=f[o].properties,s=1;else if(0===t)i={position:n[o=0],heading:p[0],speed:c[0],timestamp:l[0]},h.map&&e._setMapCamera(i.position,i.heading,!1),P.setCoordinates(u,i.position,[i.position,i.position]),a=f[0].properties;else{var g=e._totalTime*t,y=null;if(g>e._totalTime)i={heading:p[o=p.length-1],speed:c[o],timestamp:l[o+1]},y=n.slice(0),a=f[o+1].properties,s=1;else if(g<0)i.heading=p[0],y=n.slice(0,1);else for(var m=0,v=e._timeInv,o=0;o<p.length;o++){if(m+v[o]>=g){i.heading=p[o],i.speed=c[o];var y=n.slice(0,o+1),d=g-m,_=c[o]*d*.001,s=_/x.math.getDistanceTo(n[o],n[o+1]);i.timestamp=l[o]+d,y.push(x.math.getDestination(n[o],i.heading,_));break}m+=v[o]}y&&0<y.length&&(i.position=y[y.length-1],h.map&&e._setMapCamera(i.position,i.heading,2<y.length),P.setCoordinates(u,i.position,y))}return i=Object.assign(a||{},i),h.captureMetadata&&(r={},(t=e._valueInterps)&&Array.isArray(t)&&t.forEach(function(t){P.interpolateValue(f[o],f[o+1],s,t,r)}),P.setMetadata(u,Object.assign(i,r))),i}return null},S.prototype._processPath=function(){var t=this,e=t._route;if(e){t._totalTime=0,t._positions=null;var n=[],r=[],i=[],o=[],a=[],s=x.math,u=e[0];if("Feature"!==u.type||"Point"!==u.geometry.type||"number"!=typeof u.properties._timestamp)throw"Feature is not a point or is missing a _timestamp value.";a.push(u.properties._timestamp),n.push(u.geometry.coordinates);for(var h,p,c=1,l=e.length;c<l;c++)"Feature"===(u=e[c]).type&&"Point"===u.geometry.type&&"number"==typeof u.properties._timestamp&&(n.push(u.geometry.coordinates),p=s.getDistanceTo(n[c-1],n[c]),a.push(u.properties._timestamp),o.push(h=a[c]-a[c-1]),t._totalTime+=h,i.push(p/(.001*h)),p=s.getHeading(n[c-1],n[c]),r.push(p));if(e.length!==n.length)throw t.dispose(),"Unable to process all points in route.";t._headingInv=r,t._speedInv=i,t._timeInv=o,t._timestamps=a,t._positions=n,k.prototype.setOptions.call(this,{duration:t._totalTime})}};var k,ze=S;function S(t,e,n){var r=k.call(this)||this,i=r;return i._shape=e,i._route=t,i.setOptions(Object.assign({rotate:!0,rotationOffset:0},n||{})),n&&n.autoPlay&&i.play(),r}t(Ne,Be=r),Ne.prototype.onAnimationProgress=function(e){var n=this;return n._shapes.forEach(function(t){t.setProperties(Object.assign(t.getProperties(),{opacity:n._minOpacity+n._opacityWidth*e}))}),null};var Be,He=Ne;function Ne(t,e,n,r){var i,o=Be.call(this,r)||this;if((n=n||1)<(e=e||0)&&(i=n,n=e,e=i),o._minOpacity=e,o._opacityWidth=n-e,t&&0<t.length)return((i=o)._shapes=t).forEach(function(t){t.setProperties(Object.assign(t.getProperties(),{opacity:e}))}),r&&r.autoPlay&&i.play(),o;throw"No shape specified for animation."}function Ve(t){t=s.instance.getById(t);t&&t.stop()}function Re(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];t=new Ge(t,e,1,n);return t.play(),t._id}t(q,Qe=x.internal.EventEmitter),q.prototype.dispose=function(){var t=this;t.stop(),t._options=null,t._animations=null,t._onComplete=null,t._isPlaying=null,t._cancelAnimations=null},q.prototype.getDuration=function(){return this._calculateDuration()},q.prototype.getOptions=function(){return Object.assign({},this._options)},q.prototype.isPlaying=function(){return this._isPlaying},q.prototype.play=function(t){var e=this;switch(t&&e.reset(),e._cancelAnimations=!1,e._options.playType){case"together":e._playTogether();break;case"sequential":e._playSeq();break;case"interval":e._playInterval()}},q.prototype.reset=function(){this._cancelAnimations=!0;var t=this._animations;if(t&&0<t.length)for(var e=0;e<t.length;e++)t[e].reset();this._isPlaying=!1},q.prototype.stop=function(){this._cancelAnimations=!0;var t=this._animations;if(t&&0<t.length)for(var e=0;e<t.length;e++)t[e].stop();this._isPlaying=!1},q.prototype.setOptions=function(t){var e,n,r;t&&(n=(e=this)._options,(r=e._isPlaying)&&e.stop(),t.playType&&-1!==["together","sequential","interval"].indexOf(t.playType)&&(n.playType=t.playType),"boolean"==typeof t.autoPlay&&(n.autoPlay=t.autoPlay,!r)&&t.autoPlay&&(r=!0),"number"==typeof t.interval&&(n.interval=0<t.interval?Math.abs(t.interval):100),e._calculateDuration(),r)&&e.play()},q.prototype._playTogether=function(){var t=this,e=this._animations;if(e&&0<e.length){t._isPlaying=!0;for(var n=0;n<e.length;n++)n===e.length-1&&(e[n]._onComplete=function(){t._isPlaying=!1,t._invokeEvent("oncomplete",null)}),e[n].play()}},q.prototype._playSeq=function(){var t,e,n=this,r=n._animations;r&&0<r.length&&(n._isPlaying=!0,t=0,(e=function(){n._isPlaying&&(0<t&&(r[t-1]._onComplete=null),!n._cancelAnimations&&t<r.length?(r[t]._onComplete=e,r[t].play(),t++):(n._isPlaying=!1,n._invokeEvent("oncomplete",null)))})())},q.prototype._playInterval=function(){var t,e,n=this,r=n._animations;r&&0<r.length&&(n._isPlaying=!0,t=0,(e=function(){n._isPlaying&&(!n._cancelAnimations&&t<r.length?(t===r.length-1&&(r[t]._onComplete=function(){n._isPlaying&&(n._isPlaying=!1,n._invokeEvent("oncomplete",null))}),r[t].play(),t++,Re(function(){e()},n._options.interval)):n._cancelAnimations&&n._isPlaying&&(n._isPlaying=!1,n._invokeEvent("oncomplete",null)))})())},q.prototype._calculateDuration=function(){var r,i=0,o=0,a=0,s=this._options,t=this._animations,u=s.interval*t.length,e=(t.forEach(function(t,e,n){t=t.getDuration();(r=u-e*s.interval)<t&&(i=Math.max(i,t-r)),o=Math.max(o,t),a+=t}),0);switch(s.playType){case"together":e=o;break;case"sequential":e=a;break;case"interval":e=i+u}return e};var Qe,T=q;function q(t,e){var n=Qe.call(this)||this,r=(n._cancelAnimations=!1,n._isPlaying=!1,n._options={playType:"together",interval:100,autoPlay:!1},n._onComplete=function(){},n);return r._animations=t,e?r.setOptions(e):r._calculateDuration(),n}c=Object.freeze({__proto__:null,FrameBasedAnimationTimer:N,GroupAnimation:T,PlayableAnimation:r,drop:function(t,e,n,r){var i=[];if(Array.isArray(t))for(var o=0,a=t.length;o<a;o++)"Feature"===t[o].type&&"Point"===t[o].geometry.type||"Point"===t[o].type?i.push(new x.Shape(t[o])):t[o]instanceof x.Shape&&"Point"===t[o].getType()&&i.push(t[o]);else"Feature"===t.type&&"Point"===t.geometry.type||"Point"===t.type?i.push(new x.Shape(t)):t instanceof x.Shape&&"Point"===t.getType()&&i.push(t);if(0<i.length)return new J(i,e,n,r);throw"No supported shapes specified."},dropMarkers:function(t,e,n,r){var i=[];if(Array.isArray(t))for(var o=0,a=t.length;o<a;o++)t[o]instanceof x.HtmlMarker&&i.push(t[o]);else t instanceof x.HtmlMarker&&i.push(t);if(0<i.length)return new J(i,e,n,r);throw"No markers specified."},setCoordinates:function(t,e,n){if(e=P.getSuitableCoordinates(t,e),t instanceof x.Shape){var r=t.getType();if("Point"===r)return new U(t,e,n);if("GeometryCollection"!==r)return new je(t,{type:t.getType(),coordinates:e},n)}return new U(t,e,n)},snakeline:function(t,e){if(t&&"LineString"===t.getType())return new qt(t.getCoordinates().slice(0),t,e);throw"Specified shape is not a LineString type, or no map specified."},moveAlongPath:function(t,e,n){if(e&&(e instanceof x.HtmlMarker||e instanceof x.Shape&&"Point"===e.getType())||n&&n.map){var r,i=void 0;if(t&&(Array.isArray(t)?i=t:t instanceof x.Shape?"LineString"===t.getType()?i=t.getCoordinates():"Polygon"===t.getType()&&0<(r=t.getCoordinates()).length&&(i=r[0]):"LineString"===t.type&&(i=t.coordinates)),i.length<2)throw"Invalid path option specified.";return new qt(i,e,n)}throw"Specified shape is not a Point type, or not map specified."},moveAlongRoute:function(t,e,n){if(t.length<2)throw"Invalid path option specified.";return new ze(t,e,n)},extractRoutePoints:function(t,e){if(e=e||"_timestamp",Array.isArray(t))for(var n=[],r=void 0,i=0,o=t.length;i<o;i++){var a=void 0,a=t[i]instanceof x.Shape?t[i].toJson():t[i];if((r=!r&&-1===["Polygon","MultiLineString","MultiPolygon","GeometryCollection"].indexOf(a.geometry.type)&&(a.properties[e]||"number"==typeof a.properties._timestamp||"Point"!==a.geometry.type&&a.properties.waypoints)?a.geometry.type:r)&&(0===n.length||"Point"===a.geometry.type)){a=this.extractRoutePoints(a,e);if(a&&(n=n.concat(a),"Point"!==r))break}}else t instanceof x.Shape?n=P.extractRoutePointsFromFeature(t.toJson(),e):"FeatureCollection"===t.type?n=this.extractRoutePoints(t.features,e):t.type&&(n=P.extractRoutePointsFromFeature(t,e));return 0<(n=n&&n.sort(function(t,e){return t.properties._timestamp-e.properties._timestamp})).length?n:null},morph:function(t,e,n){return new je(t,e,n)},delay:function(t,e){return new Ge(e,t,1)},interval:function(t,e,n){return new Ge(e,t,Math.max(n||1/0,1))},setInterval:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return(t=new Ge(t,e,1/0,n)).play(),t._id},clearInterval:Ve,setTimeout:Re,clearTimeout:function(t){Ve(t)},getEasingFn:function(t){return a[t]||null},getEasingNames:function(){return Object.keys(a)},flowingDashedLine:function(o,t){"round"===o.getOptions().lineCap&&o.setOptions({lineCap:"butt"});var a=t.dashLength||4,s=t.gapLength||4,u=40*a/(s+a),h=40-u;return new N(40,function(t){var e,n,r,i,t=t<u?(n=(1-(e=t/u))*a,r=s,i=e*a,0):(n=0,r=(1-(e=(t-u)/h))*s,i=a,e*s);o.setOptions({strokeDashArray:[n,r,i,t]})},t)},fadeShapes:function(t,e,n,r){if(0<t.length)return new He(t,e,n,r);throw"No supported shapes specified."}}),T=G.merge("atlas.layer",R),r=G.merge("atlas.animations",c),D.animations=r,D.layer=T})(this.atlas=this.atlas||{},atlas);
